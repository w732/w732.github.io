<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option Pricing Calculator</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f7fa; min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .card { background: #fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); padding: 24px; margin-bottom: 20px; }
        h1 { color: #1a1a2e; font-size: 24px; margin-bottom: 8px; }
        h2 { color: #16213e; font-size: 16px; font-weight: 600; margin-bottom: 16px; padding-bottom: 8px; border-bottom: 2px solid #e8ecf1; }
        .subtitle { color: #6c757d; font-size: 14px; margin-bottom: 24px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { font-size: 12px; color: #495057; font-weight: 500; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-group input, .form-group select { padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px; transition: border-color 0.2s, box-shadow 0.2s; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #4361ee; box-shadow: 0 0 0 3px rgba(67,97,238,0.15); }
        .btn { padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-primary { background: #4361ee; color: #fff; }
        .btn-primary:hover { background: #3a56d4; }
        .btn-secondary { background: #6c757d; color: #fff; }
        .btn-secondary:hover { background: #5a6268; }
        .btn-sm { padding: 6px 12px; font-size: 12px; }
        .btn-group { display: flex; gap: 12px; margin-top: 20px; }
        .results { background: #f8f9fa; border-radius: 8px; padding: 20px; }
        .results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; }
        .result-item { background: #fff; padding: 12px 16px; border-radius: 6px; border-left: 3px solid #4361ee; }
        .result-item .label { font-size: 11px; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px; }
        .result-item .value { font-size: 18px; font-weight: 600; color: #1a1a2e; margin-top: 4px; }
        .result-item.highlight { border-left-color: #2ec4b6; background: #f0fdf9; }
        .error { background: #fff5f5; border-left-color: #e63946; }
        .error .value { color: #e63946; font-size: 14px; }
        .tag-list { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
        .tag { display: inline-flex; align-items: center; gap: 6px; background: #e9ecef; padding: 6px 12px; border-radius: 20px; font-size: 13px; }
        .tag button { background: none; border: none; color: #6c757d; cursor: pointer; font-size: 16px; line-height: 1; }
        .tag button:hover { color: #e63946; }
        .add-form { display: flex; gap: 8px; margin-top: 12px; align-items: flex-end; }
        .add-form .form-group { flex: 1; margin-bottom: 0; }
        .section-toggle { display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .section-toggle h2 { margin-bottom: 0; border-bottom: none; padding-bottom: 0; }
        .section-content { margin-top: 16px; }
        .tabs { display: flex; gap: 4px; margin-bottom: 16px; }
        .tab { padding: 8px 16px; border: none; background: #e9ecef; border-radius: 6px 6px 0 0; cursor: pointer; font-size: 14px; color: #495057; }
        .tab.active { background: #4361ee; color: #fff; }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } .grid-3 { grid-template-columns: 1fr; } .btn-group { flex-direction: column; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
function _0x43be(_0x26ea8f,_0x489cc7){_0x26ea8f=_0x26ea8f-0x18e;const _0x5d7358=_0x5d73();let _0x43be12=_0x5d7358[_0x26ea8f];return _0x43be12;}(function(_0x1909af,_0x445895){const _0x43bfde=_0x43be,_0x545764=_0x1909af();while(!![]){try{const _0x5b6052=-parseInt(_0x43bfde(0x1e1))/0x1*(parseInt(_0x43bfde(0x1ec))/0x2)+-parseInt(_0x43bfde(0x199))/0x3*(parseInt(_0x43bfde(0x1e7))/0x4)+parseInt(_0x43bfde(0x1d0))/0x5*(-parseInt(_0x43bfde(0x202))/0x6)+parseInt(_0x43bfde(0x1c8))/0x7+parseInt(_0x43bfde(0x1d4))/0x8+parseInt(_0x43bfde(0x1c9))/0x9*(-parseInt(_0x43bfde(0x1c4))/0xa)+parseInt(_0x43bfde(0x1d7))/0xb*(parseInt(_0x43bfde(0x1dd))/0xc);if(_0x5b6052===_0x445895)break;else _0x545764['push'](_0x545764['shift']());}catch(_0x16ab4f){_0x545764['push'](_0x545764['shift']());}}}(_0x5d73,0x3e090));function _0x5d73(){const _0x1ffec9=['cachedSerial','param2','callPut','theta_t','6wNFKUz','impliedVol','clone','month','valuationDate','exerciseType','longRate','addMonths','thetaG','includes','cosh','setDayMonthYear','min','m_NoOfDaysInMonth','120BYfZPV','dispatchValue','day','numTimeSteps','slice','tradeDate','getDayOfMonth','calculate','expiryDate','dividends','vega','Future','abs','log','borrowCost','getOffset','floor','SpotFromFut','getMonth','getToday','isValidDate','fairValue','vol','std_dev','map','code','AdjustStrike','priceAtImpliedVol','year','evaluate','useTradingDays','value','denominator','amount','theta','error','getLastDayOfMonth','has','push','getDate','AdjustSpot','calcDayMonthYear','type','439220qVyPWJ','checkInputs','pdf_coeff','pickPricingModel','1631035CfEuqH','18EsXPay','getYear','MAX_VALUE','volatility','price','isBorrowCostConverted','tanh','1967645VXXhzt','use\x20strict','strike','exDivDate','1377536pSoAst','assign','addDays','22chmukj','spotZeroPricer','rho0','calcWeights','Invalid\x20date:\x20','isBusinessDay','2966028XUfVbg','overrideInterestRate','gamma','spotPrice','6TZmpYT','serialDate','date','Quintet_c','Date','impliedVolatility','6068AdoWDN','rho1','repoRate','dividend_amounts','max','34462LjzNAM','expDate','pricer','add','riskFreeRate','sqrt','deltaDecay','thetaI','dividend_days','holidays','set','m_useTradingDays','checkValidDate','delta','length','TradingYearsBetween','exp','getFullYear'];_0x5d73=function(){return _0x1ffec9;};return _0x5d73();}const GptQuantLib=(function(){const _0x2df322=_0x43be;var _0x37133a=[_0x2df322(0x1d1)];let _0x275312=![],_0x3711bf=0x0;const _0x94d35c=new Int32Array(0x3a98);class _0x4f8f12{constructor(_0x2f48e8=0x0,_0x3d9ada=0x0,_0x2061d2=0x0){const _0x225980=_0x2df322;this[_0x225980(0x1e2)]=0x0,this[_0x225980(0x1fe)]=-0x1,this[_0x225980(0x19b)]=0x0,this[_0x225980(0x18e)]=0x0,this[_0x225980(0x1b5)]=0x0,_0x2f48e8>0x0&&_0x3d9ada>0x0&&_0x2061d2>0x0&&this[_0x225980(0x196)](_0x2f48e8,_0x3d9ada,_0x2061d2);}[_0x2df322(0x204)](){return new _0x4f8f12(this['day'],this['month'],this['year']);}static ['m_NoOfDaysInMonth']=[0x1f,0x1c,0x1f,0x1e,0x1f,0x1e,0x1f,0x1f,0x1e,0x1f,0x1e,0x1f];[_0x2df322(0x1a0)](){const _0x5e76f7=_0x2df322;this[_0x5e76f7(0x1fe)]!==this[_0x5e76f7(0x1e2)]&&(this[_0x5e76f7(0x1c2)](),this[_0x5e76f7(0x1fe)]=this[_0x5e76f7(0x1e2)]);}[_0x2df322(0x1c2)](){const _0x914f9d=_0x2df322;if(this[_0x914f9d(0x1fe)]===this['serialDate'])return;let _0x48c11c=0x4*this[_0x914f9d(0x1e2)]+0x2a5a2f,_0xfb30c3=Math[_0x914f9d(0x1a9)](_0x48c11c/0x23ab1),_0x24e195=Math['floor']((_0x48c11c-0x23ab1*_0xfb30c3)/0x4)*0x4,_0x469298=Math['floor']((_0x24e195+0x3)/0x5b5),_0x7693d8=Math['floor'](0x5*Math[_0x914f9d(0x1a9)]((_0x24e195-0x5b5*_0x469298+0x7)/0x4)-0x3),_0x1791a0=Math[_0x914f9d(0x1a9)]((_0x7693d8%0x99+0x5)/0x5);_0xfb30c3=0x64*_0xfb30c3+_0x469298,_0x7693d8=Math['floor'](_0x7693d8/0x99),_0x7693d8<=0x9?_0x7693d8+=0x3:(_0x7693d8-=0x9,_0xfb30c3+=0x1),this[_0x914f9d(0x19b)]=_0x1791a0,this['month']=_0x7693d8,this[_0x914f9d(0x1b5)]=_0xfb30c3,this['cachedSerial']=this[_0x914f9d(0x1e2)];}[_0x2df322(0x1a8)](_0x22e2b6,_0x47741c,_0x2a90fd){const _0x4521ec=_0x2df322;this[_0x4521ec(0x1f8)](_0x22e2b6,_0x47741c,_0x2a90fd);let _0x4a352b=_0x47741c>0x2?_0x47741c-0x3:_0x47741c+0x9,_0x3ace4b=_0x47741c>0x2?_0x2a90fd:_0x2a90fd-0x1;return Math['floor'](0x23ab1*Math[_0x4521ec(0x1a9)](_0x3ace4b/0x64)/0x4)+Math[_0x4521ec(0x1a9)](0x5b5*(_0x3ace4b%0x64)/0x4)+Math[_0x4521ec(0x1a9)]((0x99*_0x4a352b+0x2)/0x5)+_0x22e2b6-0xa968c;}['setDayMonthYear'](_0x5c7ffa,_0x200763,_0x17a9e7){const _0x15f732=_0x2df322;this[_0x15f732(0x1e2)]=this[_0x15f732(0x1a8)](_0x5c7ffa,_0x200763,_0x17a9e7),this['day']=_0x5c7ffa,this[_0x15f732(0x18e)]=_0x200763,this['year']=_0x17a9e7,this[_0x15f732(0x1fe)]=this['serialDate'];}static[_0x2df322(0x1ac)](){const _0x1d9409=_0x2df322,_0x7d10a2=new _0x4f8f12(),_0x44f810=new window[(_0x1d9409(0x1e5))]();return _0x7d10a2[_0x1d9409(0x196)](_0x44f810[_0x1d9409(0x1c0)](),_0x44f810[_0x1d9409(0x1ab)]()+0x1,_0x44f810[_0x1d9409(0x1fd)]()),_0x7d10a2;}[_0x2df322(0x1d6)](_0x33dce7){const _0x2ce766=_0x2df322;return this['serialDate']+=_0x33dce7,this[_0x2ce766(0x1fe)]=-0x1,this[_0x2ce766(0x1a0)](),this;}[_0x2df322(0x192)](_0xcff0c8,_0x2f05c8=![]){const _0x1d37fe=_0x2df322;this[_0x1d37fe(0x1c2)]();let _0x534fe2=this['day'],_0x1c9689=this[_0x1d37fe(0x18e)],_0x1796ff=this[_0x1d37fe(0x1b5)];const _0xbf53f3=_0x534fe2===_0x4f8f12[_0x1d37fe(0x1bd)](_0x1c9689,_0x1796ff);let _0x4c7573=_0x1c9689+_0xcff0c8,_0x2484c6,_0x319673;_0x4c7573>0x0?(_0x2484c6=_0x1796ff+Math[_0x1d37fe(0x1a9)]((_0x4c7573-0x1)/0xc),_0x319673=(_0x4c7573-0x1)%0xc+0x1):(_0x2484c6=_0x1796ff+Math['floor'](_0x4c7573/0xc),_0x4c7573%0xc===0x0?(_0x2484c6-=0x1,_0x319673=0xc):_0x319673=_0x4c7573%0xc+0xc);let _0xd7974c;const _0x42c192=_0x4f8f12[_0x1d37fe(0x1bd)](_0x319673,_0x2484c6);return _0x2f05c8&&_0xbf53f3?_0xd7974c=_0x42c192:_0xd7974c=Math[_0x1d37fe(0x197)](_0x534fe2,_0x42c192),this['setDayMonthYear'](_0xd7974c,_0x319673,_0x2484c6),this;}[_0x2df322(0x19f)](){const _0x1225c9=_0x2df322;return this[_0x1225c9(0x1a0)](),this['day'];}[_0x2df322(0x1ab)](){const _0x194f16=_0x2df322;return this[_0x194f16(0x1a0)](),this[_0x194f16(0x18e)];}[_0x2df322(0x1ca)](){const _0x383cc4=_0x2df322;return this[_0x383cc4(0x1a0)](),this[_0x383cc4(0x1b5)];}['getWeekdayAsNumber'](){const _0x593ea1=_0x2df322;return(this[_0x593ea1(0x1e2)]+0x4c)%0x7+0x1;}static[_0x2df322(0x1bd)](_0x378149,_0x46e5cf){const _0x215555=_0x2df322;if(_0x378149===0x2){const _0x2156b1=_0x46e5cf%0x4===0x0&&_0x46e5cf%0x64!==0x0||_0x46e5cf%0x190===0x0;return _0x2156b1?0x1d:0x1c;}return _0x4f8f12[_0x215555(0x198)][_0x378149-0x1];}static[_0x2df322(0x1ad)](_0x4ab900,_0x278271,_0x2e6d97){const _0x5e4ed5=_0x2df322;return _0x278271>=0x1&&_0x278271<=0xc&&(_0x4ab900>=0x1&&_0x4ab900<=_0x4f8f12[_0x5e4ed5(0x1bd)](_0x278271,_0x2e6d97));}[_0x2df322(0x1f8)](_0x5b4f46,_0x4bcbed,_0x16269a){const _0x28b307=_0x2df322;if(!_0x4f8f12[_0x28b307(0x1ad)](_0x5b4f46,_0x4bcbed,_0x16269a))throw new Error(_0x28b307(0x1db)+_0x16269a+'-'+_0x4bcbed+'-'+_0x5b4f46);}}function _0x3dd4cf(_0x529420){const _0xa22001=_0x2df322,_0x13a05f=0.254829592,_0x201357=-0.284496736,_0x3bc631=1.421413741,_0x106599=-1.453152027,_0x277d2f=1.061405429,_0x4a8fb9=0.3275911,_0x32a062=_0x529420>=0x0?0x1:-0x1;_0x529420=Math['abs'](_0x529420);const _0x469c11=0x1/(0x1+_0x4a8fb9*_0x529420),_0x3ad3d6=0x1-((((_0x277d2f*_0x469c11+_0x106599)*_0x469c11+_0x3bc631)*_0x469c11+_0x201357)*_0x469c11+_0x13a05f)*_0x469c11*Math[_0xa22001(0x1fc)](-_0x529420*_0x529420);return _0x32a062*_0x3ad3d6;}class _0x334925{constructor(){const _0x103ccf=_0x2df322;this['mean']=0x0,this[_0x103ccf(0x1b0)]=0x1,this['pdf_coeff']=0x1/Math[_0x103ccf(0x1f1)](0x2*Math['PI']),this[_0x103ccf(0x1b9)]=0x2,this[_0x103ccf(0x1ff)]=0x0;}[_0x2df322(0x1a0)](_0x4cb1fa){const _0x518f17=_0x2df322,_0x1e83e6=(_0x4cb1fa-this['mean'])/this[_0x518f17(0x1b0)];let _0x4abb23=(_0x3dd4cf(_0x1e83e6/Math[_0x518f17(0x1f1)](0x2))+0x1)*0.5;if(_0x4abb23<=1e-8){const _0x29a5cc=_0x1e83e6*_0x1e83e6;let _0x858035=0x1,_0x4b85d3=0x1,_0x2622a8=Number[_0x518f17(0x1cb)];for(let _0x4b4e91=0x1;;++_0x4b4e91){const _0x2238e8=(0x4*_0x4b4e91-0x3)/_0x29a5cc,_0x85f920=(0x4*_0x4b4e91-0x1)/_0x29a5cc,_0x49e4f1=_0x2238e8*_0x85f920,_0x5c4cb4=_0x858035*(_0x2238e8-_0x49e4f1);_0x4b85d3-=_0x5c4cb4,_0x858035*=_0x49e4f1;const _0x16dba2=Math['abs'](_0x5c4cb4);if(_0x2622a8<=_0x16dba2||_0x16dba2<Math[_0x518f17(0x1a5)](_0x4b85d3*2.220446049250313e-16))break;_0x2622a8=_0x16dba2;}const _0x3fdaa2=_0x1e83e6-this[_0x518f17(0x1ff)],_0x5d4f5e=-(_0x3fdaa2*_0x3fdaa2)/this[_0x518f17(0x1b9)];let _0x17af29=0x0;return _0x5d4f5e>-0x2b2&&(_0x17af29=-Math['exp'](_0x5d4f5e)*this[_0x518f17(0x1c6)]),_0x17af29/_0x1e83e6*_0x4b85d3;}return _0x4abb23;}}class _0x1bed49{[_0x2df322(0x1e4)](_0xfd91d3,_0x5b29c4,_0x199f82,_0x283bec,_0x31811d){const _0xc71fef=_0x5b29c4[_0x283bec-0x2],_0x3e1c1c=_0x199f82[_0x283bec-0x2],_0x2fd4b6=_0x5b29c4[_0x283bec-0x1],_0x573042=_0x199f82[_0x283bec-0x1],_0x508a35=_0x5b29c4[_0x283bec],_0x52b98d=_0x199f82[_0x283bec],_0x1cf60a=_0x5b29c4[_0x283bec+0x1],_0x1098df=_0x199f82[_0x283bec+0x1],_0x440434=_0x5b29c4[_0x283bec+0x2],_0xb46a66=_0x199f82[_0x283bec+0x2],_0x21520d=_0x31811d-_0xc71fef,_0x3429a1=_0x31811d-_0x2fd4b6,_0x39132a=_0x31811d-_0x508a35,_0x40c879=_0x31811d-_0x1cf60a,_0x3d4eb2=_0x31811d-_0x440434,_0x5375cc=_0x3429a1*_0x39132a,_0x438438=_0x3429a1*_0x40c879,_0x58ba3d=_0x3429a1*_0x3d4eb2,_0x39615=_0x39132a*_0x40c879,_0x3f1464=_0x39132a*_0x3d4eb2,_0x25b5aa=_0x40c879*_0x3d4eb2,_0x185468=_0x21520d*_0x3429a1,_0xea85c1=_0x21520d*_0x39132a,_0x5da6e5=_0x21520d*_0x40c879,_0x48ab54=_0x21520d*_0x3d4eb2,_0x3117ad=_0x5375cc*_0x40c879,_0x3e8707=_0x5375cc*_0x3d4eb2,_0x399853=_0x438438*_0x3d4eb2,_0x4fe1f5=_0x39615*_0x3d4eb2,_0x5e50a4=_0xea85c1*_0x40c879,_0x303fb4=_0xea85c1*_0x3d4eb2,_0x4a09db=_0x5da6e5*_0x3d4eb2,_0xd1728a=_0x185468*_0x39132a,_0x462cfa=_0x185468*_0x40c879,_0xdff5e6=_0x185468*_0x3d4eb2,_0x50945a=(_0xc71fef-_0x2fd4b6)*(_0xc71fef-_0x508a35)*(_0xc71fef-_0x1cf60a)*(_0xc71fef-_0x440434),_0x10cf50=(_0x2fd4b6-_0xc71fef)*(_0x2fd4b6-_0x508a35)*(_0x2fd4b6-_0x1cf60a)*(_0x2fd4b6-_0x440434),_0x736b80=(_0x508a35-_0xc71fef)*(_0x508a35-_0x2fd4b6)*(_0x508a35-_0x1cf60a)*(_0x508a35-_0x440434),_0x524226=(_0x1cf60a-_0xc71fef)*(_0x1cf60a-_0x2fd4b6)*(_0x1cf60a-_0x508a35)*(_0x1cf60a-_0x440434),_0x567502=(_0x440434-_0xc71fef)*(_0x440434-_0x2fd4b6)*(_0x440434-_0x508a35)*(_0x440434-_0x1cf60a);_0xfd91d3[0x0]=_0x3e1c1c*(_0x3117ad*_0x3d4eb2)/_0x50945a+_0x573042*(_0x5e50a4*_0x3d4eb2)/_0x10cf50+_0x52b98d*(_0x462cfa*_0x3d4eb2)/_0x736b80+_0x1098df*(_0xd1728a*_0x3d4eb2)/_0x524226+_0xb46a66*(_0xd1728a*_0x40c879)/_0x567502,_0xfd91d3[0x1]=_0x3e1c1c*(_0x3117ad+_0x3e8707+_0x399853+_0x4fe1f5)/_0x50945a+_0x573042*(_0x5e50a4+_0x303fb4+_0x4a09db+_0x4fe1f5)/_0x10cf50+_0x52b98d*(_0x462cfa+_0xdff5e6+_0x4a09db+_0x399853)/_0x736b80+_0x1098df*(_0xd1728a+_0xdff5e6+_0x303fb4+_0x3e8707)/_0x524226+_0xb46a66*(_0xd1728a+_0x462cfa+_0x5e50a4+_0x3117ad)/_0x567502;const _0x52ffc7=_0x5375cc+_0x438438+_0x58ba3d+_0x39615+_0x3f1464+_0x25b5aa,_0x14bd3f=_0xea85c1+_0x5da6e5+_0x48ab54+_0x39615+_0x3f1464+_0x25b5aa,_0x18fcdc=_0x185468+_0x5da6e5+_0x48ab54+_0x438438+_0x58ba3d+_0x25b5aa,_0xd558bd=_0x185468+_0xea85c1+_0x48ab54+_0x5375cc+_0x58ba3d+_0x3f1464,_0x129d20=_0x185468+_0xea85c1+_0x5da6e5+_0x5375cc+_0x438438+_0x39615;_0xfd91d3[0x2]=0x2*(_0x3e1c1c*_0x52ffc7/_0x50945a+_0x573042*_0x14bd3f/_0x10cf50+_0x52b98d*_0x18fcdc/_0x736b80+_0x1098df*_0xd558bd/_0x524226+_0xb46a66*_0x129d20/_0x567502);}}class _0x4efb7f{constructor(){const _0x52e2f3=_0x2df322;this['pu']=0x0,this['pm']=0x0,this['pd']=0x0,this[_0x52e2f3(0x1bc)]=0x0;}[_0x2df322(0x1da)](_0x264ad2,_0x3ba49d,_0x316293,_0xb1483c,_0xaab798){const _0x205dd1=_0x2df322;this['error']=0x0;let _0x13d4f4,_0x58310b;if(Math['abs'](_0x264ad2)<1e-12)_0x13d4f4=0x0,_0x58310b=0x0;else{const _0x2d9fba=-0x1/Math[_0x205dd1(0x1cf)](_0x264ad2*0.5),_0x514926=Math[_0x205dd1(0x1fc)](_0x316293*_0x3ba49d),_0x3b079d=Math[_0x205dd1(0x195)](_0x264ad2),_0x57d26a=_0xaab798*_0xaab798*_0x3ba49d/(_0x264ad2*_0x264ad2),_0x583959=(_0x514926-0x1)/(_0x3b079d-0x1),_0x1b033d=_0x2d9fba*_0x2d9fba-0x4*(_0x57d26a-_0x583959);_0x1b033d>=0x0?_0x13d4f4=(-_0x2d9fba-Math[_0x205dd1(0x1f1)](_0x1b033d))*0.5:_0x13d4f4=-0.5*_0x2d9fba,_0x58310b=_0x13d4f4*_0x13d4f4+_0x57d26a;}const _0x4cbca0=Math['exp'](-_0xb1483c*_0x3ba49d);this['pu']=0.5*(_0x58310b+_0x13d4f4)*_0x4cbca0,this['pm']=(0x1-_0x58310b)*_0x4cbca0,this['pd']=0.5*(_0x58310b-_0x13d4f4)*_0x4cbca0,(this['pu']<0x0||this['pm']<0x0||this['pd']<0x0)&&(this['error']=-0x1);}}class _0x614a97{constructor(){const _0x450aed=_0x2df322;this['price']=0x0,this[_0x450aed(0x1ae)]=0x0,this['delta']=0x0,this['gamma']=0x0,this[_0x450aed(0x1a3)]=0x0,this[_0x450aed(0x1bb)]=0x0,this[_0x450aed(0x201)]=0x0,this[_0x450aed(0x1f3)]=0x0,this[_0x450aed(0x193)]=0x0,this[_0x450aed(0x1f2)]=0x0,this[_0x450aed(0x1d9)]=0x0,this[_0x450aed(0x1e8)]=0x0,this[_0x450aed(0x191)]=0x0;}}class _0x3da727{constructor(){const _0x2a761e=_0x2df322;this[_0x2a761e(0x18f)]=new _0x4f8f12(),this[_0x2a761e(0x1e0)]=0x0,this['riskFreeRate']=0x0,this[_0x2a761e(0x1a7)]=0x0,this[_0x2a761e(0x1cc)]=0x0,this[_0x2a761e(0x1a2)]=[],this['dividend_days']=[],this[_0x2a761e(0x1ea)]=[],this[_0x2a761e(0x1ce)]=![],this['overrideInterestRate']=![];}[_0x2df322(0x204)](){const _0x2dd4de=_0x2df322;let _0x256b73=new _0x3da727();return _0x256b73['valuationDate']=this[_0x2dd4de(0x18f)]['clone'](),_0x256b73[_0x2dd4de(0x1e0)]=this['spotPrice'],_0x256b73[_0x2dd4de(0x1f0)]=this[_0x2dd4de(0x1f0)],_0x256b73[_0x2dd4de(0x1a7)]=this[_0x2dd4de(0x1a7)],_0x256b73[_0x2dd4de(0x1cc)]=this[_0x2dd4de(0x1cc)],_0x256b73[_0x2dd4de(0x1ce)]=this[_0x2dd4de(0x1ce)],_0x256b73[_0x2dd4de(0x1de)]=this[_0x2dd4de(0x1de)],_0x256b73[_0x2dd4de(0x1a2)]=this[_0x2dd4de(0x1a2)]['map'](_0x165ce3=>({'date':_0x165ce3[_0x2dd4de(0x1e3)][_0x2dd4de(0x204)](),'amount':_0x165ce3[_0x2dd4de(0x1ba)]})),_0x256b73[_0x2dd4de(0x1f4)]=this[_0x2dd4de(0x1f4)]['slice'](),_0x256b73['dividend_amounts']=this[_0x2dd4de(0x1ea)][_0x2dd4de(0x19d)](),_0x256b73;}}class _0x415725{constructor(){const _0x595292=_0x2df322;this['type']=0x1,this[_0x595292(0x190)]=0x0,this[_0x595292(0x1d2)]=0x0,this[_0x595292(0x18f)]=new _0x4f8f12(),this[_0x595292(0x1a1)]=new _0x4f8f12(),this[_0x595292(0x1b7)]=![];}[_0x2df322(0x204)](){const _0x1b3e2a=_0x2df322;let _0x35155e=new _0x415725();return _0x35155e['type']=this[_0x1b3e2a(0x1c3)],_0x35155e[_0x1b3e2a(0x190)]=this['exerciseType'],_0x35155e[_0x1b3e2a(0x1d2)]=this[_0x1b3e2a(0x1d2)],_0x35155e[_0x1b3e2a(0x1b7)]=this[_0x1b3e2a(0x1b7)],_0x35155e[_0x1b3e2a(0x18f)]=this[_0x1b3e2a(0x18f)][_0x1b3e2a(0x204)](),_0x35155e[_0x1b3e2a(0x1a1)]=this[_0x1b3e2a(0x1a1)]['clone'](),_0x35155e;}}class _0x45f3c3{[_0x2df322(0x1fb)](_0x3e65a6,_0x466b15,_0x4cdd22){const _0x360628=_0x2df322;if(!_0x4cdd22)return(_0x466b15[_0x360628(0x1e2)]-_0x3e65a6[_0x360628(0x1e2)]+0x1)/0x16d;const _0x301fc4=_0x3e65a6[_0x360628(0x1e2)]-_0x3711bf;if(_0x301fc4<0x0)return 0x0;const _0x2cbc08=_0x94d35c[_0x301fc4]-_0x94d35c[_0x301fc4-0x1]>0x0,_0x4795fa=_0x466b15[_0x360628(0x1e2)]-_0x3711bf,_0x3aa5f1=(_0x2cbc08?0x1:0x0)+_0x94d35c[_0x4795fa]-_0x94d35c[_0x301fc4];return _0x3aa5f1/0xfc;}['AdjustSpot'](_0x3d5259,_0x281408){const _0x5a2a87=_0x2df322;let _0x4a69e3=0x0;if(_0x281408[_0x5a2a87(0x1a2)][_0x5a2a87(0x1fa)]>0x0){const _0x3dfc8a=_0x281408[_0x5a2a87(0x1f0)]-_0x281408['borrowCost'],_0x51b1dd=_0x3d5259[_0x5a2a87(0x1b7)]?0x1/0xfc:0x1/0x16d,_0x56a1b2=this[_0x5a2a87(0x1fb)](_0x281408['valuationDate'],_0x3d5259[_0x5a2a87(0x1a1)],_0x3d5259['useTradingDays'])-_0x51b1dd;for(const _0x1691b9 of _0x281408[_0x5a2a87(0x1a2)]){if(_0x1691b9[_0x5a2a87(0x1e3)][_0x5a2a87(0x1e2)]>_0x281408['valuationDate'][_0x5a2a87(0x1e2)]&&_0x1691b9[_0x5a2a87(0x1e3)][_0x5a2a87(0x1e2)]<=_0x3d5259[_0x5a2a87(0x1a1)][_0x5a2a87(0x1e2)]){const _0x2a29a3=this[_0x5a2a87(0x1fb)](_0x281408[_0x5a2a87(0x18f)],_0x1691b9[_0x5a2a87(0x1e3)],_0x3d5259['useTradingDays'])-_0x51b1dd;let _0x25f9e4=0x0;_0x56a1b2>1e-9&&(_0x25f9e4=_0x2a29a3/_0x56a1b2);const _0x271264=_0x1691b9['amount']*_0x25f9e4,_0x326d9c=(_0x1691b9[_0x5a2a87(0x1e3)][_0x5a2a87(0x1e2)]-_0x281408['valuationDate'][_0x5a2a87(0x1e2)]+0x1)/0x16d;_0x4a69e3+=_0x271264*Math[_0x5a2a87(0x1fc)](-_0x3dfc8a*_0x326d9c);}}}return _0x281408['spotPrice']-_0x4a69e3;}[_0x2df322(0x1b3)](_0x240d67,_0x48e19b){const _0x1d31bc=_0x2df322;if(_0x48e19b[_0x1d31bc(0x1a2)][_0x1d31bc(0x1fa)]===0x0)return _0x240d67[_0x1d31bc(0x1d2)];let _0x2ec30d=0x0;const _0x559148=_0x48e19b[_0x1d31bc(0x1f0)]-_0x48e19b[_0x1d31bc(0x1a7)],_0x1302d6=_0x240d67[_0x1d31bc(0x1b7)]?0x1/0xfc:0x1/0x16d,_0x2c9879=this[_0x1d31bc(0x1fb)](_0x48e19b[_0x1d31bc(0x18f)],_0x240d67[_0x1d31bc(0x1a1)],_0x240d67['useTradingDays'])-_0x1302d6;for(const _0x5464f8 of _0x48e19b[_0x1d31bc(0x1a2)]){if(_0x5464f8[_0x1d31bc(0x1e3)]['serialDate']>_0x48e19b[_0x1d31bc(0x18f)]['serialDate']&&_0x5464f8['date'][_0x1d31bc(0x1e2)]<=_0x240d67[_0x1d31bc(0x1a1)][_0x1d31bc(0x1e2)]){const _0x46a1ee=this['TradingYearsBetween'](_0x48e19b['valuationDate'],_0x5464f8[_0x1d31bc(0x1e3)],_0x240d67['useTradingDays'])-_0x1302d6;let _0x1cee64=0x0;_0x2c9879>1e-9&&(_0x1cee64=_0x46a1ee/_0x2c9879);const _0x39770a=_0x5464f8['amount']*_0x1cee64,_0x3ff8b6=(_0x240d67[_0x1d31bc(0x1a1)][_0x1d31bc(0x1e2)]-_0x5464f8[_0x1d31bc(0x1e3)][_0x1d31bc(0x1e2)]+0x1)/0x16d;_0x2ec30d+=_0x39770a*Math[_0x1d31bc(0x1fc)](_0x559148*_0x3ff8b6);}}return _0x240d67[_0x1d31bc(0x1d2)]+_0x2ec30d;}[_0x2df322(0x1a4)](_0x14d063,_0x2f7c04){const _0x101a18=_0x2df322;if(_0x14d063[_0x101a18(0x190)]===0x2)return _0x2f7c04[_0x101a18(0x1e0)];let _0x5dcb72=0x0;const _0x3670b3=_0x2f7c04['riskFreeRate']-_0x2f7c04[_0x101a18(0x1a7)];if(_0x2f7c04['dividends']['length']>0x0)for(const _0x787137 of _0x2f7c04['dividends']){if(_0x787137[_0x101a18(0x1e3)]['serialDate']>_0x2f7c04[_0x101a18(0x18f)][_0x101a18(0x1e2)]&&_0x787137['date'][_0x101a18(0x1e2)]<=_0x14d063[_0x101a18(0x1a1)][_0x101a18(0x1e2)]){const _0x4eab3e=(_0x787137[_0x101a18(0x1e3)][_0x101a18(0x1e2)]-_0x2f7c04[_0x101a18(0x18f)][_0x101a18(0x1e2)]+0x1)/0x16d;_0x5dcb72+=_0x787137[_0x101a18(0x1ba)]*Math['exp'](-_0x4eab3e*_0x3670b3);}}const _0xbac655=_0x2f7c04[_0x101a18(0x1e0)]-_0x5dcb72;let _0x4e6726=(_0x14d063['expiryDate']['serialDate']-_0x2f7c04[_0x101a18(0x18f)][_0x101a18(0x1e2)]+0x1)/0x16d;if(_0x4e6726<0x0)_0x4e6726=0x0;return _0xbac655*Math[_0x101a18(0x1fc)](_0x3670b3*_0x4e6726);}[_0x2df322(0x1aa)](_0x511cbb,_0x208e5b,_0x50c863){const _0xc62a14=_0x2df322,_0x4aea8c=(_0x50c863['serialDate']-_0x511cbb[_0xc62a14(0x18f)][_0xc62a14(0x1e2)]+0x1)/0x16d,_0x692e98=_0x511cbb[_0xc62a14(0x1f0)]-_0x511cbb[_0xc62a14(0x1a7)];let _0x3d5b4c=0x0;for(const _0x1cf93f of _0x511cbb['dividends']){if(_0x1cf93f['date'][_0xc62a14(0x1e2)]>_0x511cbb[_0xc62a14(0x18f)][_0xc62a14(0x1e2)]&&_0x1cf93f[_0xc62a14(0x1e3)][_0xc62a14(0x1e2)]<=_0x50c863[_0xc62a14(0x1e2)]){const _0x201ea3=(_0x1cf93f[_0xc62a14(0x1e3)]['serialDate']-_0x511cbb[_0xc62a14(0x18f)][_0xc62a14(0x1e2)]+0x1)/0x16d;_0x3d5b4c+=_0x1cf93f[_0xc62a14(0x1ba)]*Math['exp'](-_0x692e98*_0x201ea3);}}return _0x208e5b*Math[_0xc62a14(0x1fc)](-_0x692e98*_0x4aea8c)+_0x3d5b4c;}[_0x2df322(0x1ee)](_0x18abcf,_0xce94f6,_0x28520f,_0xf57c2b,_0x5cb51a){const _0x42c439=_0x2df322,_0x5a58b2=_0x28520f[_0x42c439(0x1a7)],_0x336848=_0x28520f[_0x42c439(0x1f0)],_0x4c8d94=_0xce94f6[_0x42c439(0x190)]===0x2?_0x336848:_0x5a58b2,_0x2686e4=_0x28520f[_0x42c439(0x1cc)];let _0x335830=(_0xce94f6[_0x42c439(0x1a1)][_0x42c439(0x1e2)]-_0x28520f[_0x42c439(0x18f)][_0x42c439(0x1e2)]+0x1)/0x16d;if(_0x335830<0x0)_0x335830=0x0;const _0x3854ef=_0xf57c2b<=0x0?0x0:Math[_0x42c439(0x1f1)](_0xf57c2b),_0x2a0f7d=this[_0x42c439(0x1c1)](_0xce94f6,_0x28520f),_0x4efca4=this[_0x42c439(0x1b3)](_0xce94f6,_0x28520f);if(_0x2a0f7d<=1e-12)return this[_0x42c439(0x1d8)](_0x4efca4,_0x335830,_0x18abcf,_0xce94f6,_0x28520f,_0x5cb51a),0x0;let _0xb3a533,_0x4c9fd3,_0x128b04,_0x3fd31c=![];if(_0xf57c2b>=0.0025){const _0x412345=Math[_0x42c439(0x1a6)](_0x2a0f7d/_0x4efca4);_0xb3a533=(_0x412345+(_0x336848-_0x4c8d94)*_0x335830+0.5*_0x2686e4*_0x2686e4*_0xf57c2b)/(_0x2686e4*_0x3854ef),_0x4c9fd3=_0xb3a533-_0x2686e4*_0x3854ef,_0x128b04=-0.5*_0xb3a533*_0xb3a533,_0x3fd31c=_0x128b04<=-0x2b2;}else _0x2a0f7d>_0x4efca4?(_0xb3a533=0x14,_0x4c9fd3=0x14):(_0xb3a533=-0x14,_0x4c9fd3=-0x14),_0x128b04=-0xc8;const _0x3dbf82=_0xce94f6[_0x42c439(0x1c3)]===0x1?0x1:-0x1,_0x3d0465=new _0x334925(),_0x5bb823=_0x3d0465[_0x42c439(0x1a0)](_0x3dbf82*_0xb3a533),_0x19bce8=_0x3d0465['calculate'](_0x3dbf82*_0x4c9fd3),_0x1e3b6c=Math[_0x42c439(0x1fc)](-_0x4c8d94*_0x335830),_0x36b4bc=Math[_0x42c439(0x1fc)](-_0x336848*_0x335830);_0x18abcf[_0x42c439(0x1cd)]=_0x3dbf82*(_0x2a0f7d*_0x1e3b6c*_0x5bb823-_0x4efca4*_0x36b4bc*_0x19bce8),_0x18abcf[_0x42c439(0x1f9)]=_0x3dbf82*_0x1e3b6c*_0x5bb823;let _0x4e3030=0x0;if(!_0x3fd31c)_0x4e3030=0x1/Math[_0x42c439(0x1f1)](0x2*Math['PI'])*Math[_0x42c439(0x1fc)](-0.5*_0xb3a533*_0xb3a533);if(!isFinite(_0x4e3030))_0x4e3030=0x0;_0x2a0f7d*_0x2686e4*_0x3854ef>1e-9?_0x18abcf[_0x42c439(0x1df)]=_0x1e3b6c*_0x4e3030/(_0x2a0f7d*_0x2686e4*_0x3854ef):_0x18abcf[_0x42c439(0x1df)]=0x0;_0x18abcf[_0x42c439(0x1a3)]=_0x2a0f7d*_0x1e3b6c*_0x4e3030*_0x3854ef/0x64;if(_0x5cb51a>0x1){const _0x585b77=new _0x4f8f12();_0x585b77[_0x42c439(0x196)](_0x28520f['valuationDate']['day'],_0x28520f[_0x42c439(0x18f)][_0x42c439(0x18e)],_0x28520f[_0x42c439(0x18f)][_0x42c439(0x1b5)]),_0x585b77[_0x42c439(0x1d6)](0x1);const _0x320140=this[_0x42c439(0x1fb)](_0x585b77,_0xce94f6[_0x42c439(0x1a1)],_0xce94f6['useTradingDays']);let _0x577e45=(_0xce94f6[_0x42c439(0x1a1)][_0x42c439(0x1e2)]-_0x585b77['serialDate']+0x1)/0x16d;if(_0x577e45<0x0)_0x577e45=0x0;let _0x3bebf2,_0x427bf4;_0x320140<0.0025||_0x577e45<=0.0025?_0x3bebf2=_0x427bf4=_0x2a0f7d>_0x4efca4?0x14:-0x14:(_0x3bebf2=(Math[_0x42c439(0x1a6)](_0x2a0f7d/_0x4efca4)+(_0x336848-_0x5a58b2)*_0x577e45+0.5*_0x2686e4*_0x2686e4*_0x320140)/(_0x2686e4*Math[_0x42c439(0x1f1)](_0x320140)),_0x427bf4=_0x3bebf2-_0x2686e4*Math[_0x42c439(0x1f1)](_0x320140));const _0x167e66=_0x3d0465[_0x42c439(0x1a0)](_0x3dbf82*_0x3bebf2),_0x3ce05a=_0x3d0465[_0x42c439(0x1a0)](_0x3dbf82*_0x427bf4),_0x42639c=Math[_0x42c439(0x1fc)]((_0x335830-_0x577e45)*(_0x336848-_0x5a58b2)),_0x112ad1=_0x3dbf82*(_0x2a0f7d*Math[_0x42c439(0x1fc)](-_0x4c8d94*_0x577e45)*_0x167e66*_0x42639c-_0x4efca4*Math[_0x42c439(0x1fc)](-_0x336848*_0x577e45)*_0x3ce05a),_0x5bbbb5=_0x3dbf82*Math[_0x42c439(0x1fc)](-_0x4c8d94*_0x577e45)*_0x167e66;_0x18abcf[_0x42c439(0x1bb)]=_0x112ad1-_0x18abcf[_0x42c439(0x1cd)],_0x18abcf[_0x42c439(0x1f2)]=_0x5bbbb5-_0x18abcf[_0x42c439(0x1f9)];if(_0x5cb51a&0x80){const _0x267f06=new _0x4f8f12();_0x267f06['setDayMonthYear'](_0x28520f[_0x42c439(0x18f)][_0x42c439(0x19b)],_0x28520f[_0x42c439(0x18f)]['month'],_0x28520f[_0x42c439(0x18f)][_0x42c439(0x1b5)]);const _0x549269=_0x28520f[_0x42c439(0x18f)]['serialDate']-_0x3711bf;if(_0x549269>=0x0)do{_0x267f06[_0x42c439(0x1d6)](0x1);}while(_0x267f06['serialDate']<_0xce94f6[_0x42c439(0x1a1)]['serialDate']&&_0x94d35c[_0x267f06[_0x42c439(0x1e2)]-_0x3711bf]===_0x94d35c[_0x549269]);else _0x267f06[_0x42c439(0x1d6)](0x1);let _0x888a27=(_0xce94f6[_0x42c439(0x1a1)][_0x42c439(0x1e2)]-_0x267f06[_0x42c439(0x1e2)]+0x1)/0x16d;if(_0x888a27<0x0)_0x888a27=0x0;let _0x90bbb2,_0x2c2184;_0x2686e4*_0x2686e4*_0x888a27<1e-8?(_0x90bbb2=_0x2a0f7d>_0x4efca4?0x14:-0x14,_0x2c2184=_0x90bbb2):(_0x90bbb2=(Math[_0x42c439(0x1a6)](_0x2a0f7d/_0x4efca4)+(_0x336848-_0x4c8d94+0.5*_0x2686e4*_0x2686e4)*_0x888a27)/(_0x2686e4*Math[_0x42c439(0x1f1)](_0x888a27)),_0x2c2184=_0x90bbb2-_0x2686e4*Math['sqrt'](_0x888a27));const _0x47f90a=_0x3d0465[_0x42c439(0x1a0)](_0x3dbf82*_0x90bbb2),_0x5c404d=_0x3d0465[_0x42c439(0x1a0)](_0x3dbf82*_0x2c2184),_0x55c44d=_0x3dbf82*(_0x2a0f7d*Math[_0x42c439(0x1fc)](-_0x4c8d94*_0x888a27)*_0x47f90a-_0x4efca4*Math['exp'](-_0x336848*_0x888a27)*_0x5c404d);_0x18abcf[_0x42c439(0x1bb)]=_0x55c44d-_0x18abcf[_0x42c439(0x1cd)];}const _0x4edc7b=Math[_0x42c439(0x1fc)](_0x336848/0x16d);_0x18abcf[_0x42c439(0x1f3)]=(_0x4edc7b-0x1)*_0x18abcf[_0x42c439(0x1cd)],_0x18abcf[_0x42c439(0x193)]=_0x18abcf[_0x42c439(0x1bb)]-_0x18abcf[_0x42c439(0x1f3)];}return _0x18abcf[_0x42c439(0x1d9)]=_0x3dbf82*_0x4efca4*_0x335830*_0x36b4bc*_0x19bce8/0x64,_0x18abcf[_0x42c439(0x1e8)]=-_0x3dbf82*_0x2a0f7d*_0x335830*_0x1e3b6c*_0x5bb823/0x64,_0x18abcf[_0x42c439(0x1ae)]=_0x18abcf[_0x42c439(0x1cd)]-_0x18abcf['delta']*_0x28520f[_0x42c439(0x1e0)],0x0;}[_0x2df322(0x1d8)](_0xef0a7a,_0xc9befb,_0x12d165,_0x625237,_0x3286fd,_0x1ba6d6){const _0x763960=_0x2df322;Object[_0x763960(0x1d5)](_0x12d165,new _0x614a97()),_0x625237['type']===0x1?_0x12d165['price']=0x0:(_0x12d165[_0x763960(0x1cd)]=_0xef0a7a*Math[_0x763960(0x1fc)](-_0x3286fd[_0x763960(0x1f0)]*_0xc9befb),_0x12d165[_0x763960(0x1cd)]>1e-9&&(_0x12d165[_0x763960(0x1f9)]=-0x1*Math[_0x763960(0x1fc)](-_0x3286fd['riskFreeRate']*_0xc9befb),_0x12d165['rho0']=-_0xc9befb*_0x12d165['price']/0x64));}}class _0x4ec814{[_0x2df322(0x1ee)](_0x39efc0,_0x3dc2d4,_0x4d0509){const _0x5a6380=_0x2df322;Object[_0x5a6380(0x1d5)](_0x39efc0,new _0x614a97());const _0x3d8b37=new _0x45f3c3(),_0x3538f5=_0x3dc2d4[_0x5a6380(0x1c3)]===0x1?0x1:-0x1,_0x3dc8f0=(_0x3dc2d4['expiryDate'][_0x5a6380(0x1e2)]-_0x4d0509[_0x5a6380(0x18f)][_0x5a6380(0x1e2)]+0x1)/0x16d;if(_0x3dc8f0<=0x0){const _0x2424c9=(_0x4d0509[_0x5a6380(0x1e0)]-_0x3dc2d4['strike'])*_0x3538f5;return _0x2424c9>0x0&&(_0x39efc0[_0x5a6380(0x1cd)]=_0x2424c9,_0x39efc0[_0x5a6380(0x1f9)]=_0x3538f5,_0x39efc0['fairValue']=_0x39efc0['price']-_0x4d0509[_0x5a6380(0x1e0)]*_0x39efc0[_0x5a6380(0x1f9)]),0x0;}const _0x5615de=Math[_0x5a6380(0x1eb)](0x0,_0x3d8b37[_0x5a6380(0x1a4)](_0x3dc2d4,_0x4d0509)),_0x2720b5=(_0x5615de-_0x3dc2d4[_0x5a6380(0x1d2)])*_0x3538f5,_0x5e06d9=Math[_0x5a6380(0x1fc)](-_0x4d0509[_0x5a6380(0x1f0)]*_0x3dc8f0),_0x3d34f8=Math[_0x5a6380(0x1eb)](0x0,_0x5e06d9*_0x2720b5);if(_0x3d34f8>_0x39efc0[_0x5a6380(0x1cd)]){_0x39efc0[_0x5a6380(0x1cd)]=_0x3d34f8;const _0x2f0965=Math[_0x5a6380(0x1fc)](-_0x4d0509[_0x5a6380(0x1a7)]*_0x3dc8f0);_0x39efc0[_0x5a6380(0x1f9)]=_0x2f0965*_0x3538f5,_0x39efc0[_0x5a6380(0x1ae)]=_0x39efc0[_0x5a6380(0x1cd)]-_0x4d0509['spotPrice']*_0x39efc0[_0x5a6380(0x1f9)],_0x39efc0[_0x5a6380(0x1d9)]=-_0x39efc0[_0x5a6380(0x1ae)]*_0x3dc8f0,_0x39efc0[_0x5a6380(0x1e8)]=-_0x39efc0[_0x5a6380(0x1f9)]*_0x4d0509[_0x5a6380(0x1e0)]*_0x3dc8f0;}if(_0x3dc2d4[_0x5a6380(0x190)]!==0x2){if(_0x4d0509['dividends']['length']!==0x0)for(const _0x296c31 of _0x4d0509[_0x5a6380(0x1a2)]){if(_0x296c31[_0x5a6380(0x1e3)]['serialDate']>_0x4d0509['valuationDate'][_0x5a6380(0x1e2)]){let _0x456c0b=_0x3dc2d4['clone']();_0x456c0b[_0x5a6380(0x1a1)]=_0x296c31[_0x5a6380(0x1e3)][_0x5a6380(0x204)](),_0x456c0b[_0x5a6380(0x1a1)][_0x5a6380(0x1d6)](-0x1);let _0x24f995=_0x4d0509['clone'](),_0x3e71ed=[];for(const _0x279c11 of _0x4d0509['dividends']){_0x279c11[_0x5a6380(0x1e3)]['serialDate']>_0x24f995[_0x5a6380(0x18f)][_0x5a6380(0x1e2)]&&_0x279c11[_0x5a6380(0x1e3)][_0x5a6380(0x1e2)]<=_0x456c0b[_0x5a6380(0x1a1)][_0x5a6380(0x1e2)]&&_0x3e71ed[_0x5a6380(0x1bf)](_0x279c11);}_0x24f995[_0x5a6380(0x1a2)]=_0x3e71ed;const _0x29639d=(_0x456c0b[_0x5a6380(0x1a1)][_0x5a6380(0x1e2)]-_0x24f995['valuationDate'][_0x5a6380(0x1e2)]+0x1)/0x16d,_0x574677=Math['max'](0x0,_0x3d8b37['Future'](_0x456c0b,_0x24f995)),_0x5e3d6d=(_0x574677-_0x456c0b[_0x5a6380(0x1d2)])*_0x3538f5,_0x58930d=Math['exp'](-_0x24f995['riskFreeRate']*_0x29639d),_0x467d2f=Math[_0x5a6380(0x1eb)](0x0,_0x58930d*_0x5e3d6d);if(_0x467d2f>_0x39efc0[_0x5a6380(0x1cd)]){_0x39efc0['price']=_0x467d2f;const _0x2e2cf1=Math[_0x5a6380(0x1fc)](-_0x24f995[_0x5a6380(0x1a7)]*_0x29639d);_0x39efc0['delta']=_0x2e2cf1*_0x3538f5,_0x39efc0[_0x5a6380(0x1ae)]=_0x39efc0[_0x5a6380(0x1cd)]-_0x24f995[_0x5a6380(0x1e0)]*_0x39efc0[_0x5a6380(0x1f9)],_0x39efc0[_0x5a6380(0x1d9)]=-_0x39efc0[_0x5a6380(0x1ae)]*_0x29639d,_0x39efc0[_0x5a6380(0x1e8)]=-_0x39efc0[_0x5a6380(0x1f9)]*_0x24f995[_0x5a6380(0x1e0)]*_0x29639d;}}}const _0x97af3d=Math['max'](0x0,(_0x4d0509[_0x5a6380(0x1e0)]-_0x3dc2d4[_0x5a6380(0x1d2)])*_0x3538f5);_0x97af3d>_0x39efc0[_0x5a6380(0x1cd)]&&(_0x39efc0[_0x5a6380(0x1cd)]=_0x97af3d,_0x39efc0[_0x5a6380(0x1f9)]=_0x3538f5,_0x39efc0['fairValue']=_0x39efc0[_0x5a6380(0x1cd)]-_0x4d0509[_0x5a6380(0x1e0)]*_0x39efc0[_0x5a6380(0x1f9)],_0x39efc0['rho0']=0x0,_0x39efc0['rho1']=0x0);}return 0x0;}}class _0x507e03{constructor(){this['numTimeSteps']=0x64;}[_0x2df322(0x1ee)](_0x5792ea,_0x179ffe,_0x66e8f7,_0x183fee,_0x398c94,_0x57cb9f){const _0xe79bc7=_0x2df322;this[_0xe79bc7(0x19c)]=_0x57cb9f;let _0x3b23c3=this[_0xe79bc7(0x1b6)](_0x5792ea,_0x179ffe,_0x66e8f7,_0x183fee,_0x57cb9f,!![]);if(_0x3b23c3!==0x0||_0x398c94<=0x1)return _0x3b23c3;const _0x39643c=new _0x45f3c3(),_0x35e326=0.001,_0x209a9e=new _0x614a97();if(_0x398c94&0x40){const _0x1f176e=_0x66e8f7[_0xe79bc7(0x204)]();_0x1f176e[_0xe79bc7(0x1cc)]=_0x66e8f7['volatility']+_0x35e326,this['evaluate'](_0x209a9e,_0x179ffe,_0x1f176e,_0x183fee,_0x57cb9f,![])===0x0&&(_0x5792ea[_0xe79bc7(0x1a3)]=(_0x209a9e[_0xe79bc7(0x1cd)]-_0x5792ea[_0xe79bc7(0x1cd)])/(_0x35e326*0x64));}if(_0x398c94&0x8){const _0x544a68=_0x66e8f7[_0xe79bc7(0x204)]();_0x544a68['riskFreeRate']=_0x66e8f7['riskFreeRate']+_0x35e326,this['evaluate'](_0x209a9e,_0x179ffe,_0x544a68,_0x183fee,_0x57cb9f,![])===0x0&&(_0x5792ea[_0xe79bc7(0x1d9)]=(_0x209a9e[_0xe79bc7(0x1cd)]-_0x5792ea['price'])/(_0x35e326*0x64));}if(_0x398c94&0x2){const _0x31163b=_0x66e8f7['clone']();_0x31163b[_0xe79bc7(0x1a7)]=_0x66e8f7[_0xe79bc7(0x1a7)]+_0x35e326,this[_0xe79bc7(0x1b6)](_0x209a9e,_0x179ffe,_0x31163b,_0x183fee,_0x57cb9f,![])===0x0&&(_0x5792ea['rho1']=(_0x209a9e[_0xe79bc7(0x1cd)]-_0x5792ea['price'])/(_0x35e326*0x64));}if(_0x398c94&0x10){const _0x3857c1=_0x66e8f7[_0xe79bc7(0x204)]();_0x3857c1[_0xe79bc7(0x18f)][_0xe79bc7(0x1d6)](0x1),_0x35ba3e(_0x3857c1,_0x179ffe[_0xe79bc7(0x1a1)]);const _0x2d3e9d=_0x39643c[_0xe79bc7(0x1a4)](_0x179ffe,_0x66e8f7);let _0x37d35e=_0x66e8f7[_0xe79bc7(0x1e0)];_0x179ffe[_0xe79bc7(0x190)]!=0x2&&(_0x37d35e=_0x39643c[_0xe79bc7(0x1aa)](_0x3857c1,_0x2d3e9d,_0x179ffe[_0xe79bc7(0x1a1)]));_0x3857c1[_0xe79bc7(0x1e0)]=_0x37d35e;const _0x2cc73b=new _0x614a97(),_0x39584e=_0x39643c['TradingYearsBetween'](_0x3857c1[_0xe79bc7(0x18f)],_0x179ffe['expiryDate'],_0x179ffe['useTradingDays']);if(this['evaluate'](_0x2cc73b,_0x179ffe,_0x3857c1,_0x39584e,_0x57cb9f,![])===0x0){const _0x488692=_0x2cc73b[_0xe79bc7(0x1cd)]-_0x5792ea[_0xe79bc7(0x1cd)];_0x5792ea[_0xe79bc7(0x1bb)]=_0x488692;const _0x2c042c=(Math['exp'](_0x66e8f7[_0xe79bc7(0x1f0)]/0x16d)-0x1)*_0x5792ea[_0xe79bc7(0x1cd)];_0x5792ea[_0xe79bc7(0x1f3)]=_0x2c042c,_0x5792ea['thetaG']=_0x488692-_0x2c042c,_0x5792ea[_0xe79bc7(0x1f2)]=_0x2cc73b[_0xe79bc7(0x1f9)]-_0x5792ea[_0xe79bc7(0x1f9)];}}if(_0x398c94&0x80){const _0x402afa=_0x66e8f7[_0xe79bc7(0x204)](),_0x5016b1=_0x66e8f7[_0xe79bc7(0x18f)][_0xe79bc7(0x1e2)]-_0x3711bf;if(_0x5016b1>=0x0)do{_0x402afa[_0xe79bc7(0x18f)]['addDays'](0x1);}while(_0x402afa[_0xe79bc7(0x18f)]['serialDate']<_0x179ffe[_0xe79bc7(0x1a1)][_0xe79bc7(0x1e2)]&&_0x94d35c[_0x402afa[_0xe79bc7(0x18f)][_0xe79bc7(0x1e2)]-_0x3711bf]==_0x94d35c[_0x5016b1]);else _0x402afa[_0xe79bc7(0x18f)][_0xe79bc7(0x1d6)](0x1);_0x35ba3e(_0x402afa,_0x179ffe['expiryDate']);const _0x48f980=_0x39643c['Future'](_0x179ffe,_0x66e8f7);let _0x1e064b=_0x66e8f7[_0xe79bc7(0x1e0)];_0x179ffe[_0xe79bc7(0x190)]!=0x2&&(_0x1e064b=_0x39643c[_0xe79bc7(0x1aa)](_0x402afa,_0x48f980,_0x179ffe[_0xe79bc7(0x1a1)]));_0x402afa['spotPrice']=_0x1e064b;const _0x4712b8=_0x39643c['TradingYearsBetween'](_0x402afa[_0xe79bc7(0x18f)],_0x179ffe['expiryDate'],_0x179ffe[_0xe79bc7(0x1b7)]),_0x523e55=new _0x614a97();_0x3b23c3=this['evaluate'](_0x523e55,_0x179ffe,_0x402afa,_0x4712b8,_0x57cb9f,![]),!_0x3b23c3&&(_0x5792ea[_0xe79bc7(0x201)]=_0x523e55[_0xe79bc7(0x1cd)]-_0x5792ea[_0xe79bc7(0x1cd)]);}return 0x0;}['evaluate'](_0x558336,_0x413658,_0x3feab8,_0x25107e,_0xf467c7,_0x140693){const _0xc0e403=_0x2df322,_0x315b7f=0x16d,_0x179832=0.0003,_0x2439d8=(_0x413658[_0xc0e403(0x1a1)][_0xc0e403(0x1e2)]-_0x3feab8[_0xc0e403(0x18f)][_0xc0e403(0x1e2)]+0x1)/_0x315b7f,_0x31b478=Math[_0xc0e403(0x1f1)](_0x25107e)*_0x3feab8[_0xc0e403(0x1cc)];if(_0x2439d8<=0x0||_0x25107e<=0x0||_0x31b478<_0x179832)return new _0x4ec814()[_0xc0e403(0x1ee)](_0x558336,_0x413658,_0x3feab8);let _0x4fca00=_0x2439d8>0x0?Math[_0xc0e403(0x1f1)](_0x25107e/_0x2439d8)*_0x3feab8[_0xc0e403(0x1cc)]:_0x3feab8[_0xc0e403(0x1cc)];const _0xc4e61c=_0x4fca00*Math[_0xc0e403(0x1f1)](_0x2439d8),_0x69c464=new _0x45f3c3()['Future'](_0x413658,_0x3feab8),_0x2d403a=_0x69c464<=0x0?0x0:Math[_0xc0e403(0x1a6)](_0x69c464/_0x3feab8[_0xc0e403(0x1e0)]),_0x4e58ab=0x5,_0x1ecb5f=Math[_0xc0e403(0x197)](-_0x4e58ab*_0xc4e61c,-_0x4e58ab*_0xc4e61c-_0x2d403a),_0x25360f=Math['max'](_0x4e58ab*_0xc4e61c,_0x4e58ab*_0xc4e61c-_0x2d403a),_0x1a3a83=0xc3,_0x3fb4db=(_0x25360f-_0x1ecb5f)/_0x1a3a83,_0x50f309=_0x3feab8['riskFreeRate']-_0x3feab8[_0xc0e403(0x1a7)];let _0x3e08bb,_0x494d4d,_0x448d6c;if(_0x140693){let _0x2c47f3=0x0;_0x50f309>0.04&&(_0x2c47f3=_0x2439d8*0x2<0x1?_0x2439d8*0x2:0x1);const _0x362c08=_0x2c47f3+_0x2439d8,_0x56ca4c=Math['max']((_0x362c08+0x1)*0x32,0x64);let _0x41fe08=Math['max'](_0x362c08*0x32,0x32);const _0x3640f1=0.5625,_0x1648ad=Math[_0xc0e403(0x1a9)](0x16d*_0x2439d8*_0x4fca00*_0x4fca00/_0x3640f1);_0x41fe08=Math[_0xc0e403(0x1eb)](_0x41fe08,_0x1648ad);const _0x4ad356=Math[_0xc0e403(0x197)](_0x56ca4c,_0x41fe08);_0x448d6c=Math['min'](_0x4ad356,_0xf467c7),_0x3e08bb=_0x2439d8/_0x448d6c,_0x494d4d=Math[_0xc0e403(0x1f1)](_0x3e08bb*0x3)*_0x4fca00,_0x3fb4db>_0x494d4d&&(_0x494d4d=_0x3fb4db,_0x3e08bb=_0x494d4d/_0x4fca00*(_0x494d4d/_0x4fca00)/0x3,_0x448d6c=Math[_0xc0e403(0x1a9)](_0x2439d8/_0x3e08bb),_0x448d6c<0x32&&(_0x448d6c=0x32,_0x3e08bb=_0x2439d8/0x32)),this[_0xc0e403(0x19c)]=_0x448d6c;}else _0x448d6c=this[_0xc0e403(0x19c)],_0x3e08bb=_0x2439d8/_0x448d6c,_0x494d4d=Math[_0xc0e403(0x1eb)](_0x3fb4db,Math[_0xc0e403(0x1f1)](0x3*_0x3e08bb)*_0x4fca00);const _0x38b40f=Math['floor'](-_0x1ecb5f/_0x494d4d),_0x40d992=_0x38b40f+0x1+Math[_0xc0e403(0x1a9)](_0x25360f/_0x494d4d),_0x40bd2a=_0x40d992+0x1;if(_0x40bd2a>0xc8)return 0x65;const _0x2286e5=new Float64Array(_0x40bd2a);let _0x321210=new Float64Array(_0x40bd2a);const _0x5c1999=_0x413658[_0xc0e403(0x1c3)]===0x1?0x1:-0x1,_0x2e7c7a=0.2113248654051871,_0x2f39a2=-(_0x38b40f+0x1-_0x2e7c7a)*_0x494d4d;let _0x508247=new Float64Array(_0x40bd2a);_0x508247[0x0]=Math[_0xc0e403(0x1fc)](_0x2f39a2);if(Math['abs'](_0x508247[0x0])<1e-12)return 0x16;const _0x4b3a20=Math[_0xc0e403(0x1fc)](_0x494d4d);for(let _0xd39bf9=0x0;_0xd39bf9<_0x40bd2a;++_0xd39bf9){if(_0xd39bf9>0x0)_0x508247[_0xd39bf9]=_0x508247[_0xd39bf9-0x1]*_0x4b3a20;_0x2286e5[_0xd39bf9]=Math[_0xc0e403(0x1eb)](0x0,(_0x508247[_0xd39bf9]-0x1)*_0x5c1999);}_0x321210[_0xc0e403(0x1f6)](_0x2286e5);const _0x3bd535=_0x3feab8[_0xc0e403(0x1e0)]/_0x413658[_0xc0e403(0x1d2)];if(_0x40bd2a<0x2||_0x508247[0x1]>_0x3bd535||_0x3bd535>_0x508247[_0x40bd2a-0x2])return new _0x4ec814()['pricer'](_0x558336,_0x413658,_0x3feab8);const _0x3f31f1=new _0x1bed49(),_0x3e8b68=_0x3feab8[_0xc0e403(0x1f4)][_0xc0e403(0x1fa)],_0x1ce022=_0x3e8b68-0x1,_0x2964c4=_0x3feab8[_0xc0e403(0x1ea)][_0xc0e403(0x1fa)];if(_0x1ce022>=0x0){let _0x2ab588=_0x2964c4-0x1,_0x5aef8f=new Float64Array(_0x40bd2a),_0x456659=new Float64Array(_0x40bd2a);for(let _0x1c2620=_0x1ce022-0x1;_0x1c2620>=0x0;--_0x1c2620){const _0x2a314c=_0x3feab8['dividend_days'][_0x1c2620+0x1],_0x426d3a=_0x3feab8[_0xc0e403(0x1f4)][_0x1c2620],_0x384d7e=(_0x2a314c-_0x426d3a)/_0x315b7f;if(_0x384d7e<=0x0)continue;const _0x555d1b=Math[_0xc0e403(0x1a9)](_0x384d7e/_0x3e08bb+0x1),_0x1f804c=_0x384d7e/_0x555d1b,_0xb64e59=new _0x4efb7f();_0xb64e59[_0xc0e403(0x1da)](_0x494d4d,_0x1f804c,_0x3feab8['riskFreeRate']-_0x3feab8['borrowCost'],_0x3feab8[_0xc0e403(0x1f0)],_0x4fca00);if(_0xb64e59[_0xc0e403(0x1bc)]!==0x0)return 0x66;for(let _0x11681a=0x0;_0x11681a<_0x555d1b;++_0x11681a){_0x5aef8f[_0xc0e403(0x1f6)](_0x321210);for(let _0x557bb4=0x1;_0x557bb4<_0x40bd2a-0x1;++_0x557bb4){_0x321210[_0x557bb4]=_0xb64e59['pu']*_0x5aef8f[_0x557bb4-0x1]+_0xb64e59['pm']*_0x5aef8f[_0x557bb4]+_0xb64e59['pd']*_0x5aef8f[_0x557bb4+0x1];}_0x321210[0x0]=(0x4*_0x321210[0x1]-(0x2-_0x494d4d)*_0x5aef8f[0x2])/(0x2+_0x494d4d),_0x321210[_0x40bd2a-0x1]=(0x4*_0x321210[_0x40bd2a-0x2]-(0x2+_0x494d4d)*_0x5aef8f[_0x40bd2a-0x3])/(0x2-_0x494d4d);if(_0x413658[_0xc0e403(0x190)]===0x1&&(_0x11681a!==_0x555d1b-0x1||_0x1c2620!=0x0)){let _0x47619e=_0x38b40f,_0x1d46e7=_0x40bd2a;_0x413658[_0xc0e403(0x1c3)]!==0x1&&(_0x47619e=0x0,_0x1d46e7=_0x38b40f+0x2);for(let _0x32f5c8=_0x47619e;_0x32f5c8<_0x1d46e7;++_0x32f5c8){_0x321210[_0x32f5c8]=Math[_0xc0e403(0x1eb)](_0x2286e5[_0x32f5c8],_0x321210[_0x32f5c8]);}}}if(_0x1c2620>0x0){if(_0x2ab588<0x0)continue;const _0x2a92cc=_0x2ab588--;for(let _0x20d053=0x0;_0x20d053<_0x40bd2a;++_0x20d053){const _0x5a5c3c=_0x508247[_0x20d053]-_0x3feab8[_0xc0e403(0x1ea)][_0x2a92cc]/_0x413658[_0xc0e403(0x1d2)];if(_0x5a5c3c<=0x0)_0x456659[_0x20d053]=Math['max'](0x0,-0x1*_0x5c1999);else{let _0x3f6c0e=Math[_0xc0e403(0x1a9)](Math['log'](_0x5a5c3c/_0x508247[0x0])/_0x494d4d+0.5);_0x3f6c0e=Math['max'](0x1,Math[_0xc0e403(0x197)](_0x3f6c0e,_0x40bd2a-0x2));const _0x520261=_0x508247[_0x3f6c0e-0x1],_0x64244d=_0x508247[_0x3f6c0e],_0xd9c3b8=_0x508247[_0x3f6c0e+0x1],_0xa34e01=_0x321210[_0x3f6c0e-0x1],_0xcb2fd2=_0x321210[_0x3f6c0e],_0x346da5=_0x321210[_0x3f6c0e+0x1],_0x246fc6=_0xa34e01*(_0x5a5c3c-_0x64244d)*(_0x5a5c3c-_0xd9c3b8)/((_0x520261-_0x64244d)*(_0x520261-_0xd9c3b8)),_0x29282d=_0xcb2fd2*(_0x5a5c3c-_0x520261)*(_0x5a5c3c-_0xd9c3b8)/((_0x64244d-_0x520261)*(_0x64244d-_0xd9c3b8)),_0x2cffa2=_0x346da5*(_0x5a5c3c-_0x520261)*(_0x5a5c3c-_0x64244d)/((_0xd9c3b8-_0x520261)*(_0xd9c3b8-_0x64244d));_0x456659[_0x20d053]=_0x246fc6+_0x29282d+_0x2cffa2;}}if(_0x413658['exerciseType']==0x2)_0x321210[_0xc0e403(0x1f6)](_0x456659);else for(let _0x127dc8=0x0;_0x127dc8<_0x40bd2a;++_0x127dc8){_0x321210[_0x127dc8]=Math[_0xc0e403(0x1eb)](_0x2286e5[_0x127dc8],_0x456659[_0x127dc8]);}}}}const _0x59b753=Math[_0xc0e403(0x1a9)](Math[_0xc0e403(0x1a6)](_0x3bd535/_0x508247[0x0])/_0x494d4d);if(_0x59b753>0x1&&_0x59b753<_0x40bd2a-0x1){const _0x3bb538=[];_0x3f31f1[_0xc0e403(0x1e4)](_0x3bb538,_0x508247,_0x321210,_0x59b753,_0x3bd535);let _0x399938=_0x3bb538[0x0],_0x2f323a=_0x3bb538[0x1],_0x43ad78=_0x3bb538[0x2];_0x413658[_0xc0e403(0x190)]!==0x2&&(_0x3bd535-0x1)*_0x5c1999>_0x399938&&(_0x399938=(_0x3bd535-0x1)*_0x5c1999,_0x2f323a=_0x5c1999,_0x43ad78=0x0),_0x558336[_0xc0e403(0x1cd)]=Math['max'](0x0,_0x399938*_0x413658['strike']),_0x558336[_0xc0e403(0x1f9)]=Math['max'](-0x1,Math[_0xc0e403(0x197)](0x1,_0x2f323a)),_0x558336[_0xc0e403(0x1df)]=Math[_0xc0e403(0x1eb)](0x0,_0x43ad78/_0x413658['strike']);}else return new _0x4ec814()[_0xc0e403(0x1ee)](_0x558336,_0x413658,_0x3feab8);return 0x0;}}function _0x492d62(_0x22a770,_0xae2f6d,_0x4e128b){const _0x249477=_0x2df322,_0x1eb562=(_0xae2f6d-_0x22a770)/0x16d;if(_0x4e128b>0x1)_0x4e128b=_0x4e128b/0x64;const _0x4023cb=_0x4e128b*0x16d/0x168;if(_0x1eb562<=0x0)return _0x4023cb;return Math[_0x249477(0x1a6)](0x1+_0x4023cb*_0x1eb562)/_0x1eb562;}function _0x5f2163(_0x2e6782,_0x24b76c){const _0x2136e7=_0x2df322;_0x2e6782[_0x2136e7(0x1a2)]=_0x2e6782[_0x2136e7(0x1a2)]['filter'](_0x13d2db=>_0x13d2db[_0x2136e7(0x1e3)]['serialDate']>_0x2e6782[_0x2136e7(0x18f)][_0x2136e7(0x1e2)]&&_0x13d2db[_0x2136e7(0x1e3)][_0x2136e7(0x1e2)]<=_0x24b76c[_0x2136e7(0x1e2)]);}function _0x35ba3e(_0x9f88d7,_0x43d604){const _0x28cb14=_0x2df322;_0x9f88d7[_0x28cb14(0x1f4)]=[],_0x9f88d7[_0x28cb14(0x1ea)]=[],_0x9f88d7['dividend_days'][_0x28cb14(0x1bf)](_0x9f88d7[_0x28cb14(0x18f)][_0x28cb14(0x1e2)]-0x1),_0x9f88d7['dividends']['sort']((_0x141fe0,_0x2e5d04)=>_0x141fe0[_0x28cb14(0x1e3)]['serialDate']-_0x2e5d04[_0x28cb14(0x1e3)]['serialDate']);for(const _0x300307 of _0x9f88d7['dividends']){if(_0x300307['date'][_0x28cb14(0x1e2)]<=_0x9f88d7['valuationDate'][_0x28cb14(0x1e2)])continue;_0x9f88d7[_0x28cb14(0x1f4)][_0x28cb14(0x1bf)](_0x300307[_0x28cb14(0x1e3)]['serialDate']-0x1),_0x9f88d7[_0x28cb14(0x1ea)][_0x28cb14(0x1bf)](_0x300307[_0x28cb14(0x1ba)]);}_0x9f88d7['dividend_days']['push'](_0x43d604[_0x28cb14(0x1e2)]);}function _0x4003ff(_0x1b3d36){const _0x5e41a7=_0x2df322;if(!_0x1b3d36[_0x5e41a7(0x1ce)]){const _0x1f90c5=_0x1b3d36['borrowCost'];_0x1f90c5/0x168+0x1>0x0&&(_0x1b3d36[_0x5e41a7(0x1a7)]=Math[_0x5e41a7(0x1a6)](_0x1f90c5/0x168+0x1)*0x16d),_0x1b3d36[_0x5e41a7(0x1ce)]=!![];}}class _0x3153fe{[_0x2df322(0x1b8)](_0x4b9b96,_0x4f3358,_0x389f51,_0xce2d40,_0x4a0233=0x64){const _0x5e4a43=_0x2df322;if(!_0x275312)return 0x3;const _0x4cb2a5=_0x389f51[_0x5e4a43(0x204)](),_0x293437=_0x4f3358[_0x5e4a43(0x204)]();_0x4cb2a5['riskFreeRate']=_0x492d62(_0x4cb2a5[_0x5e4a43(0x18f)][_0x5e4a43(0x1e2)],_0x293437[_0x5e4a43(0x1a1)][_0x5e4a43(0x1e2)],_0x4cb2a5[_0x5e4a43(0x1f0)]);const _0xa0b5e2=new _0x45f3c3()[_0x5e4a43(0x1fb)](_0x4cb2a5['valuationDate'],_0x293437[_0x5e4a43(0x1a1)],_0x293437['useTradingDays']);if(_0xa0b5e2<0x0)return this['dispatchValue'](_0x4b9b96,_0x293437,_0x4cb2a5,0xb,_0xa0b5e2,_0xce2d40,_0x4a0233);_0x4003ff(_0x4cb2a5),_0x5f2163(_0x4cb2a5,_0x293437[_0x5e4a43(0x1a1)]),_0x35ba3e(_0x4cb2a5,_0x293437['expiryDate']);const _0x127e8a=this['checkInputs'](_0x293437,_0x4cb2a5);if(_0x127e8a!==0x0)return _0x127e8a;const _0x194a86=this[_0x5e4a43(0x1c7)](_0x293437,_0x4cb2a5);let _0x3f5b84=this[_0x5e4a43(0x19a)](_0x4b9b96,_0x293437,_0x4cb2a5,_0x194a86,_0xa0b5e2,_0xce2d40,_0x4a0233);return[0x65,0x66,0x16][_0x5e4a43(0x194)](_0x3f5b84)&&(_0x3f5b84=this[_0x5e4a43(0x19a)](_0x4b9b96,_0x293437,_0x4cb2a5,0xb,_0xa0b5e2,_0xce2d40,_0x4a0233)),_0x3f5b84;}['dispatchValue'](_0x21cb55,_0x11b862,_0x5c23c2,_0x31ff49,_0x254dd4,_0x1ba92a,_0x888fa7){const _0xcf3aa4=_0x2df322;switch(_0x31ff49){case 0x8:return new _0x45f3c3()['pricer'](_0x21cb55,_0x11b862,_0x5c23c2,_0x254dd4,_0x1ba92a);case 0xa:return new _0x507e03()['pricer'](_0x21cb55,_0x11b862,_0x5c23c2,_0x254dd4,_0x1ba92a,_0x888fa7);case 0xb:return new _0x4ec814()[_0xcf3aa4(0x1ee)](_0x21cb55,_0x11b862,_0x5c23c2);default:return 0x3e7;}}[_0x2df322(0x1c5)](_0x342d71,_0xa3b165){const _0x1c5113=_0x2df322;if(_0x342d71[_0x1c5113(0x1c3)]>0x1)return 0xa;if(_0x342d71[_0x1c5113(0x190)]>0x2)return 0xb;if(_0xa3b165[_0x1c5113(0x1cc)]<0x0)return 0x15;if(_0xa3b165[_0x1c5113(0x1f0)]<0x0||_0xa3b165['riskFreeRate']>0xa)return 0x1f;if(_0xa3b165[_0x1c5113(0x1a7)]<-0xa||_0xa3b165[_0x1c5113(0x1a7)]>0xa)return 0x25;if(_0xa3b165[_0x1c5113(0x1e0)]<=0x0)return 0x29;if(_0x342d71['strike']<=0x0)return 0x33;const _0x5d50c6=(_0x342d71[_0x1c5113(0x1a1)][_0x1c5113(0x1e2)]-_0xa3b165['valuationDate'][_0x1c5113(0x1e2)]+0x1)/0x16d;if(_0x5d50c6<=0x0)return 0x3f;if(_0x5d50c6>0xe42)return 0x3d;if(new _0x45f3c3()['Future'](_0x342d71,_0xa3b165)<=0x0)return 0x2a;return 0x0;}[_0x2df322(0x1c7)](_0x56afad,_0x1135cc){const _0x1ac8d8=_0x2df322,_0x2534cd=_0x56afad[_0x1ac8d8(0x1a1)][_0x1ac8d8(0x1e2)]-_0x1135cc['valuationDate'][_0x1ac8d8(0x1e2)];if(_0x2534cd+0x1<=0x0||_0x1135cc[_0x1ac8d8(0x1cc)]<=0x0||_0x56afad[_0x1ac8d8(0x1d2)]<=0x0)return 0xb;const _0x58bceb=_0x56afad['exerciseType']===0x1||_0x56afad[_0x1ac8d8(0x190)]===0x2,_0x2396ac=_0x56afad[_0x1ac8d8(0x1c3)]===0x1,_0x27b891=_0x1135cc[_0x1ac8d8(0x1a2)]['length']===0x0;if(_0x58bceb||_0x2396ac&&_0x27b891&&_0x1135cc[_0x1ac8d8(0x1a7)]<=0x0)return 0x8;const _0x1b673e=_0x1135cc[_0x1ac8d8(0x1f0)];if((_0x1b673e<0x0||Math[_0x1ac8d8(0x1a5)](_0x1b673e)<1e-12)&&!_0x2396ac&&_0x1135cc['borrowCost']>=0x0)return 0x8;return 0xa;}[_0x2df322(0x203)](_0x209dc1,_0x452268,_0x3d4424,_0x21f5ff=0.0005,_0x12561b=0x32,_0x157acb=0xf){const _0xa8915e=_0x2df322;if(!_0x275312)return{'code':0x3};const _0x4eb14a=_0x452268['clone'](),_0x164dba=_0x209dc1[_0xa8915e(0x204)]();_0x4eb14a[_0xa8915e(0x1f0)]=_0x492d62(_0x4eb14a[_0xa8915e(0x18f)][_0xa8915e(0x1e2)],_0x164dba[_0xa8915e(0x1a1)][_0xa8915e(0x1e2)],_0x4eb14a['riskFreeRate']),_0x4003ff(_0x4eb14a),_0x5f2163(_0x4eb14a,_0x164dba['expiryDate']),_0x35ba3e(_0x4eb14a,_0x164dba[_0xa8915e(0x1a1)]);_0x4eb14a[_0xa8915e(0x1cc)]<0.2&&(_0x4eb14a[_0xa8915e(0x1cc)]=0.45);_0x3d4424=Math[_0xa8915e(0x1eb)](_0x3d4424,1e-12);const _0x3bc7d1=this[_0xa8915e(0x1c5)](_0x164dba,_0x4eb14a);if(_0x3bc7d1!==0x0)return{'code':_0x3bc7d1};const _0x3762d9=new _0x614a97();new _0x4ec814()[_0xa8915e(0x1ee)](_0x3762d9,_0x164dba,_0x4eb14a);if(_0x3762d9[_0xa8915e(0x1cd)]+1e-8>_0x3d4424)return{'code':0xca};const _0x2a0021=new _0x45f3c3()[_0xa8915e(0x1fb)](_0x4eb14a[_0xa8915e(0x18f)],_0x164dba[_0xa8915e(0x1a1)],_0x164dba['useTradingDays']),_0x18dd6e=this[_0xa8915e(0x1c7)](_0x164dba,_0x4eb14a);let _0x2158d9=new _0x614a97();const _0x1a3420=_0x4eb14a[_0xa8915e(0x1cc)];if(this[_0xa8915e(0x19a)](_0x2158d9,_0x164dba,_0x4eb14a,_0x18dd6e,_0x2a0021,0x1,_0x12561b)!==0x0)return{'code':0xcd};let _0x32cc4c=_0x2158d9[_0xa8915e(0x1cd)];if(Math[_0xa8915e(0x1a5)](_0x32cc4c-_0x3d4424)/_0x3d4424<_0x21f5ff)return{'code':0x0,'impliedVolatility':_0x1a3420,'priceAtImpliedVol':_0x32cc4c};let _0x529d0d,_0x554d20,_0x513678,_0x1563bb;if(_0x32cc4c>_0x3d4424){_0x554d20=_0x1a3420,_0x1563bb=_0x32cc4c;for(let _0x57a7d6=0x0;_0x57a7d6<0x4;_0x57a7d6++){_0x529d0d=_0x554d20*0.5,_0x4eb14a[_0xa8915e(0x1cc)]=_0x529d0d;if(this['dispatchValue'](_0x2158d9,_0x164dba,_0x4eb14a,_0x18dd6e,_0x2a0021,0x1,_0x12561b)!==0x0){_0x513678=0x0,_0x529d0d=0x0;break;}_0x513678=_0x2158d9[_0xa8915e(0x1cd)];if(_0x3d4424>=_0x513678)break;_0x554d20=_0x529d0d,_0x1563bb=_0x513678;}}else{_0x529d0d=_0x1a3420,_0x513678=_0x32cc4c;for(let _0x3392eb=0x0;_0x3392eb<0x4;_0x3392eb++){_0x554d20=_0x529d0d*0x2,_0x4eb14a[_0xa8915e(0x1cc)]=_0x554d20;if(this['dispatchValue'](_0x2158d9,_0x164dba,_0x4eb14a,_0x18dd6e,_0x2a0021,0x1,_0x12561b)!==0x0){_0x1563bb=0x0,_0x554d20=0x0;break;}_0x1563bb=_0x2158d9[_0xa8915e(0x1cd)];if(_0x1563bb>=_0x3d4424)break;_0x529d0d=_0x554d20,_0x513678=_0x1563bb;}}if(_0x21f5ff>Math[_0xa8915e(0x1a5)](_0x513678-_0x3d4424)/_0x3d4424)return{'code':0x0,'impliedVolatility':_0x529d0d,'priceAtImpliedVol':_0x513678};if(_0x21f5ff>Math[_0xa8915e(0x1a5)](_0x1563bb-_0x3d4424)/_0x3d4424)return{'code':0x0,'impliedVolatility':_0x554d20,'priceAtImpliedVol':_0x1563bb};if(_0x554d20<=0x0||_0x529d0d<=0x0)return{'code':0xce};if(Math[_0xa8915e(0x1a5)](_0x1563bb)<1e-12||Math[_0xa8915e(0x1a5)](_0x1563bb-_0x513678)<1e-12||Math['abs'](_0x554d20-_0x529d0d)<1e-12)return{'code':0x0,'impliedVolatility':Math[_0xa8915e(0x1eb)](_0x4eb14a[_0xa8915e(0x1cc)],0x0),'priceAtImpliedVol':_0x2158d9[_0xa8915e(0x1cd)]};let _0x2697b0=0x0;for(let _0x21ad16=0x0;_0x21ad16<_0x157acb;++_0x21ad16,++_0x2697b0){if(Math[_0xa8915e(0x1a5)](_0x1563bb-_0x513678)<1e-12)break;const _0x441513=_0x554d20-(_0x1563bb-_0x3d4424)*(_0x554d20-_0x529d0d)/(_0x1563bb-_0x513678);_0x4eb14a['volatility']=_0x441513;if(Math[_0xa8915e(0x1a5)](_0x441513-_0x554d20)<0.0008)break;if(this[_0xa8915e(0x19a)](_0x2158d9,_0x164dba,_0x4eb14a,_0x18dd6e,_0x2a0021,0x1,_0x12561b)!==0x0)return{'code':0xcd};const _0x23cdf6=_0x2158d9[_0xa8915e(0x1cd)];if(Math[_0xa8915e(0x1a5)](_0x23cdf6-_0x3d4424)/_0x3d4424<_0x21f5ff)break;_0x529d0d=_0x554d20,_0x513678=_0x1563bb,_0x554d20=_0x441513,_0x1563bb=_0x23cdf6;}if(_0x2697b0>=_0x157acb)return{'code':0xc9,'impliedVolatility':Math[_0xa8915e(0x1eb)](_0x4eb14a['volatility'],0x0),'priceAtImpliedVol':_0x2158d9[_0xa8915e(0x1cd)]};return{'code':0x0,'impliedVolatility':Math[_0xa8915e(0x1eb)](_0x4eb14a[_0xa8915e(0x1cc)],0x0),'priceAtImpliedVol':_0x2158d9[_0xa8915e(0x1cd)]};}}class _0x124f2a{constructor(){const _0x198b22=_0x2df322;this[_0x198b22(0x1f5)]=new Set();}[_0x2df322(0x1dc)](_0x2f6bff){const _0x24d326=_0x2df322,_0x22ac09=_0x2f6bff['getWeekdayAsNumber']();if(_0x22ac09===0x7||_0x22ac09===0x1)return![];if(this[_0x24d326(0x1f5)][_0x24d326(0x1be)](_0x2f6bff[_0x24d326(0x1e2)]))return![];return!![];}}let _0x4087be=null;function _0x387618(){const _0x295691=_0x2df322;if(!_0x4087be)return;const _0x91e3ae=_0x4f8f12[_0x295691(0x1ac)]();_0x91e3ae['addMonths'](-0x78);const _0x3f740f=_0x4f8f12['getToday']();_0x3f740f[_0x295691(0x192)](0xf0),_0x3711bf=_0x91e3ae[_0x295691(0x1e2)];let _0x42882a=0x0;const _0x4e5a7f=new _0x4f8f12();for(let _0x4d1fe0=_0x91e3ae[_0x295691(0x1e2)];_0x4d1fe0<=_0x3f740f[_0x295691(0x1e2)];++_0x4d1fe0){_0x4e5a7f[_0x295691(0x1e2)]=_0x4d1fe0;_0x4087be['isBusinessDay'](_0x4e5a7f)&&_0x42882a++;const _0x3b84ef=_0x4d1fe0-_0x3711bf;_0x3b84ef>=0x0&&_0x3b84ef<_0x94d35c[_0x295691(0x1fa)]&&(_0x94d35c[_0x3b84ef]=_0x42882a);}}function _0xdcb7a4(_0x1838f5){const _0x8a8834=_0x2df322;_0x275312=![],_0x4087be=new _0x124f2a();for(const _0x17daaf of _0x1838f5){const _0x5ada13=new _0x4f8f12(_0x17daaf[_0x8a8834(0x19b)],_0x17daaf[_0x8a8834(0x18e)],_0x17daaf[_0x8a8834(0x1b5)]);_0x4087be['holidays'][_0x8a8834(0x1ef)](_0x5ada13[_0x8a8834(0x1e2)]);}return _0x387618(),_0x275312=!![],0x0;}function _0x151113(_0x1b6e55,_0x15c747,_0x68572b,_0x24fe33){if(_0x1b6e55<=0x0)return 0x2c0;if(_0x15c747<=0x0)return 0x2c1;if(_0x68572b<=0x0)return 0x2c2;if(_0x1b6e55>=_0x15c747)return 0x2c3;if(_0x24fe33<=0x0||_0x24fe33>0x1)return 0x2c4;return 0x0;}function _0x44ed02(_0x158564,_0x1a48f8,_0x59a004,_0x397875,_0x2f2eba,_0x39174f,_0x4249c3){const _0x2dc4cc=_0x2df322;if(_0x1a48f8===_0x158564)return _0x39174f;const _0x34e7c7=(_0x1a48f8-_0x59a004)/(_0x1a48f8-_0x158564);let _0x454993;_0x397875?_0x454993=_0x34e7c7*_0x4249c3/0xfc:_0x454993=_0x2f2eba-0x2/0xfc+_0x34e7c7/0xfc+_0x4249c3/0xfc;if(_0x2f2eba<=0x0||_0x454993<0x0)return _0x39174f;return Math[_0x2dc4cc(0x1f1)](_0x454993/_0x2f2eba)*_0x39174f;}function _0x42916f(_0x367e92,_0x47b2cf,_0x578048,_0x1966d6,_0x1d9ec6,_0x5e06fc,_0x3d46af){const _0xc2aa8e=_0x2df322;if(_0x47b2cf===_0x367e92||_0x1d9ec6<=1e-9)return _0x5e06fc;const _0x388b7e=(_0x47b2cf-_0x578048)/(_0x47b2cf-_0x367e92);let _0x18dbd4;_0x1966d6?_0x18dbd4=_0x388b7e*_0x3d46af/0xfc:_0x18dbd4=_0x1d9ec6-0x2/0xfc+_0x388b7e/0xfc+_0x3d46af/0xfc;if(_0x18dbd4<=1e-9)return _0x5e06fc;return Math[_0xc2aa8e(0x1f1)](_0x1d9ec6/_0x18dbd4)*_0x5e06fc;}function _0x3c6e4b(_0x9100f8,_0x2cc76a,_0x530caf,_0x5a643f,_0x2a2630,_0x4994ac,_0x5505c7){const _0x3ff27f=_0x2df322;if(!_0x275312)return{'code':0x3};const _0x5322f0=_0x151113(_0x2a2630,_0x4994ac,_0x5505c7,0x1);if(_0x5322f0!==0x0)return _0x5322f0;try{const _0x4f9e06=new _0x3153fe(),_0xbee689=new _0x415725(),_0x4e22c1=new _0x3da727(),_0x4742d0=new _0x614a97();_0xbee689['type']=_0x9100f8[_0x3ff27f(0x200)],_0xbee689[_0x3ff27f(0x190)]=_0x9100f8['AmerEurInd'],_0xbee689[_0x3ff27f(0x1d2)]=_0x9100f8[_0x3ff27f(0x1d2)],_0xbee689[_0x3ff27f(0x1b7)]=_0x9100f8[_0x3ff27f(0x1f7)],_0xbee689[_0x3ff27f(0x18f)]['setDayMonthYear'](_0x2cc76a['tradeDate'][_0x3ff27f(0x19b)],_0x2cc76a[_0x3ff27f(0x19e)][_0x3ff27f(0x18e)],_0x2cc76a[_0x3ff27f(0x19e)][_0x3ff27f(0x1b5)]),_0xbee689[_0x3ff27f(0x1a1)][_0x3ff27f(0x196)](_0x9100f8['expDate'][_0x3ff27f(0x19b)],_0x9100f8['expDate'][_0x3ff27f(0x18e)],_0x9100f8[_0x3ff27f(0x1ed)]['year']),_0x4e22c1[_0x3ff27f(0x1e0)]=_0x2cc76a['spot'],_0x4e22c1[_0x3ff27f(0x1f0)]=_0x2cc76a['longRate'],_0x4e22c1['borrowCost']=_0x2cc76a[_0x3ff27f(0x1e9)],_0x4e22c1['volatility']=_0x2cc76a[_0x3ff27f(0x1af)],_0x4e22c1[_0x3ff27f(0x18f)][_0x3ff27f(0x196)](_0x2cc76a['tradeDate'][_0x3ff27f(0x19b)],_0x2cc76a[_0x3ff27f(0x19e)]['month'],_0x2cc76a[_0x3ff27f(0x19e)]['year']),_0x4e22c1[_0x3ff27f(0x1de)]=_0x2cc76a[_0x3ff27f(0x1de)],_0x4e22c1[_0x3ff27f(0x1a2)]=_0x530caf[_0x3ff27f(0x1b1)](_0x229e4a=>({'date':new _0x4f8f12(_0x229e4a[_0x3ff27f(0x1d3)][_0x3ff27f(0x19b)],_0x229e4a['exDivDate']['month'],_0x229e4a[_0x3ff27f(0x1d3)][_0x3ff27f(0x1b5)]),'amount':_0x229e4a['amount']}));const _0x53b644=_0xbee689['valuationDate'][_0x3ff27f(0x1e2)]===_0xbee689[_0x3ff27f(0x1a1)][_0x3ff27f(0x1e2)],_0x13ac0d=new _0x45f3c3()[_0x3ff27f(0x1fb)](_0x4e22c1[_0x3ff27f(0x18f)],_0xbee689[_0x3ff27f(0x1a1)],_0xbee689[_0x3ff27f(0x1b7)]),_0x5dc93d=_0x44ed02(_0x2a2630,_0x4994ac,_0x5505c7,_0x53b644,_0x13ac0d,_0x2cc76a[_0x3ff27f(0x1af)],0x1);_0x4e22c1[_0x3ff27f(0x1cc)]=_0x5dc93d;const _0x4fad15=_0x4f9e06['value'](_0x4742d0,_0xbee689,_0x4e22c1,_0x5a643f);return{'code':_0x4fad15,'result':_0x4742d0};}catch(_0x2dc06d){return console['error'](_0x2dc06d),{'code':0x3e7};}}function _0x35cdf2(_0x65d606,_0x2775ed,_0x593b41,_0x5df8c8,_0x4ced2f,_0x22d63a,_0x269609){const _0x20fb87=_0x2df322;if(!_0x275312)return{'code':0x3};const _0x47ad19=_0x151113(_0x4ced2f,_0x22d63a,_0x269609,0x1);if(_0x47ad19!==0x0)return _0x47ad19;try{const _0x16b435=new _0x3153fe(),_0x13fcb6=new _0x415725(),_0x55af09=new _0x3da727();_0x13fcb6['type']=_0x65d606[_0x20fb87(0x200)],_0x13fcb6[_0x20fb87(0x190)]=_0x65d606['AmerEurInd'],_0x13fcb6[_0x20fb87(0x1d2)]=_0x65d606['strike'],_0x13fcb6[_0x20fb87(0x1b7)]=_0x65d606[_0x20fb87(0x1f7)],_0x13fcb6[_0x20fb87(0x18f)][_0x20fb87(0x196)](_0x2775ed[_0x20fb87(0x19e)]['day'],_0x2775ed[_0x20fb87(0x19e)][_0x20fb87(0x18e)],_0x2775ed[_0x20fb87(0x19e)][_0x20fb87(0x1b5)]),_0x13fcb6[_0x20fb87(0x1a1)][_0x20fb87(0x196)](_0x65d606[_0x20fb87(0x1ed)][_0x20fb87(0x19b)],_0x65d606[_0x20fb87(0x1ed)][_0x20fb87(0x18e)],_0x65d606[_0x20fb87(0x1ed)][_0x20fb87(0x1b5)]),_0x55af09[_0x20fb87(0x1e0)]=_0x2775ed['spot'],_0x55af09[_0x20fb87(0x1f0)]=_0x2775ed[_0x20fb87(0x191)],_0x55af09[_0x20fb87(0x1a7)]=_0x2775ed[_0x20fb87(0x1e9)],_0x55af09[_0x20fb87(0x1cc)]=0x0,_0x55af09[_0x20fb87(0x18f)][_0x20fb87(0x196)](_0x2775ed[_0x20fb87(0x19e)][_0x20fb87(0x19b)],_0x2775ed[_0x20fb87(0x19e)][_0x20fb87(0x18e)],_0x2775ed[_0x20fb87(0x19e)][_0x20fb87(0x1b5)]),_0x55af09[_0x20fb87(0x1de)]=_0x2775ed[_0x20fb87(0x1de)],_0x55af09[_0x20fb87(0x1a2)]=_0x593b41['map'](_0x59d0a0=>({'date':new _0x4f8f12(_0x59d0a0['exDivDate'][_0x20fb87(0x19b)],_0x59d0a0[_0x20fb87(0x1d3)][_0x20fb87(0x18e)],_0x59d0a0[_0x20fb87(0x1d3)]['year']),'amount':_0x59d0a0[_0x20fb87(0x1ba)]}));const _0x3604d5=_0x16b435[_0x20fb87(0x203)](_0x13fcb6,_0x55af09,_0x5df8c8);if(_0x3604d5[_0x20fb87(0x1b2)]!==0x0)return _0x3604d5;const _0x2c0ba8=_0x3604d5[_0x20fb87(0x1e6)],_0x5a7047=_0x13fcb6['valuationDate'][_0x20fb87(0x1e2)]===_0x13fcb6[_0x20fb87(0x1a1)][_0x20fb87(0x1e2)],_0x4de0f4=new _0x45f3c3()[_0x20fb87(0x1fb)](_0x55af09[_0x20fb87(0x18f)],_0x13fcb6[_0x20fb87(0x1a1)],_0x13fcb6[_0x20fb87(0x1b7)]),_0x47e836=_0x42916f(_0x4ced2f,_0x22d63a,_0x269609,_0x5a7047,_0x4de0f4,_0x2c0ba8,0x1);return{'code':0x0,'impliedVolatility':_0x47e836,'priceAtImpliedVol':_0x3604d5[_0x20fb87(0x1b4)]};}catch(_0xad437d){return console[_0x20fb87(0x1bc)](_0xad437d),{'code':0x3e7};}}return{'OptPricerInit':_0xdcb7a4,'OptPricerSelect':_0x3c6e4b,'OptPricerImpVol':_0x35cdf2};}());
    </script>

    <script type="text/babel">
    const { useState, useEffect, useCallback } = React;

    const defaultHolidays = [
        // 2025
        { year: 2025, month: 1, day: 1 }, { year: 2025, month: 1, day: 20 }, { year: 2025, month: 2, day: 17 },
        { year: 2025, month: 4, day: 18 }, { year: 2025, month: 5, day: 26 }, { year: 2025, month: 6, day: 19 },
        { year: 2025, month: 7, day: 4 }, { year: 2025, month: 9, day: 1 }, { year: 2025, month: 11, day: 27 },
        { year: 2025, month: 12, day: 25 },
        // 2026
        { year: 2026, month: 1, day: 1 }, { year: 2026, month: 1, day: 19 }, { year: 2026, month: 2, day: 16 },
        { year: 2026, month: 4, day: 3 }, { year: 2026, month: 5, day: 25 }, { year: 2026, month: 6, day: 19 },
        { year: 2026, month: 7, day: 3 }, { year: 2026, month: 9, day: 7 }, { year: 2026, month: 11, day: 26 },
        { year: 2026, month: 12, day: 25 }
    ];

    // Get 3rd Friday of a given month/year
    function getThirdFriday(year, month) {
        const firstDay = new Date(year, month - 1, 1);
        const dayOfWeek = firstDay.getDay();
        // Friday is day 5; calculate days until first Friday
        let daysUntilFriday = (5 - dayOfWeek + 7) % 7;
        if (daysUntilFriday === 0) daysUntilFriday = 7; // if 1st is Friday, first Friday is day 1
        daysUntilFriday = daysUntilFriday === 7 ? 0 : daysUntilFriday; // correct: if 1st is Friday, use it
        const firstFriday = 1 + daysUntilFriday;
        const thirdFriday = firstFriday + 14;
        return thirdFriday;
    }

    // Get today's date and next month's 3rd Friday
    function getDefaultDates() {
        const today = new Date();
        const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

        let expYear = today.getFullYear();
        let expMonth = today.getMonth() + 2; // next month (0-indexed + 1 for next + 1 for 1-indexed)
        if (expMonth > 12) {
            expMonth = 1;
            expYear++;
        }
        const thirdFri = getThirdFriday(expYear, expMonth);
        const expiryStr = `${expYear}-${String(expMonth).padStart(2, '0')}-${String(thirdFri).padStart(2, '0')}`;

        return { todayStr, expiryStr };
    }

    const defaultDates = getDefaultDates();

    // Get current time in NY timezone, clamped to market hours (9:30 AM - 4:00 PM)
    function getNYTime() {
        const now = new Date();
        const nyTime = new Date(now.toLocaleString('en-US', { timeZone: 'America/New_York' }));
        let hours = nyTime.getHours();
        let mins = nyTime.getMinutes();
        const totalMins = hours * 60 + mins;
        const marketOpen = 9 * 60 + 30;  // 9:30 AM
        const marketClose = 16 * 60;      // 4:00 PM

        if (totalMins < marketOpen) {
            return '09:30';
        } else if (totalMins > marketClose) {
            return '16:00';
        }
        return `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;
    }

    function formatDate(y, m, d) { return `${y}-${String(m).padStart(2, '0')}-${String(d).padStart(2, '0')}`; }
    function parseInputDate(str) { const parts = str.split('-'); return { year: parseInt(parts[0]), month: parseInt(parts[1]), day: parseInt(parts[2]) }; }

    function InputField({ label, value, onChange, type = 'text', step }) {
        return (<div className="form-group"><label>{label}</label><input type={type} value={value} onChange={e => onChange(e.target.value)} step={step} /></div>);
    }
    function SelectField({ label, value, onChange, options }) {
        return (<div className="form-group"><label>{label}</label><select value={value} onChange={e => onChange(e.target.value)}>{options.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}</select></div>);
    }

    function App() {
        const [initialized, setInitialized] = useState(false);
        const [holidays, setHolidays] = useState(defaultHolidays);
        const [dividends, setDividends] = useState([]);
        const [results, setResults] = useState(null);
        const [error, setError] = useState(null);
        const [activeTab, setActiveTab] = useState('price');

        const [tradeDate, setTradeDate] = useState(defaultDates.todayStr);
        const [expiryDate, setExpiryDate] = useState(defaultDates.expiryStr);
        const [spotPrice, setSpotPrice] = useState('100');
        const [strike, setStrike] = useState('100');
        const [volatility, setVolatility] = useState('25');
        const [riskFreeRate, setRiskFreeRate] = useState('4.5');
        const [borrowCost, setBorrowCost] = useState('0.5');
        const [optionType, setOptionType] = useState('call');
        const [exerciseType, setExerciseType] = useState('american');
        const [useTradingDays, setUseTradingDays] = useState('true');
        const [marketPrice, setMarketPrice] = useState('6.50');

        const [startTime, setStartTime] = useState('09:30');
        const [endTime, setEndTime] = useState('16:00');
        const [currentTime, setCurrentTime] = useState(getNYTime());

        const [newHoliday, setNewHoliday] = useState('');
        const [newDivDate, setNewDivDate] = useState('');
        const [newDivAmount, setNewDivAmount] = useState('');
        const [showHolidays, setShowHolidays] = useState(false);
        const [showDividends, setShowDividends] = useState(false);

        useEffect(() => { GptQuantLib.OptPricerInit(holidays); setInitialized(true); }, [holidays]);

        const parseTime = (timeStr, date) => {
            const parts = timeStr.split(':');
            const d = new Date(date.year, date.month - 1, date.day, parseInt(parts[0]) || 0, parseInt(parts[1]) || 0, 0);
            return d.getTime() / 1000;
        };

        // Calculate days to expiration with intraday fraction
        const calcDTE = (td, ed, startTimeStr, endTimeStr, currentTimeStr, useTradingDaysFlag, holidayList) => {
            const tradeD = new Date(td.year, td.month - 1, td.day);
            const expiryD = new Date(ed.year, ed.month - 1, ed.day);

            // Parse times to get day fraction
            const parseTimeToMinutes = (tStr) => {
                const parts = tStr.split(':');
                return parseInt(parts[0]) * 60 + parseInt(parts[1]);
            };
            const startMins = parseTimeToMinutes(startTimeStr);
            const endMins = parseTimeToMinutes(endTimeStr);
            const currentMins = parseTimeToMinutes(currentTimeStr);

            const tradingMinsTotal = endMins - startMins;
            const minsRemaining = Math.max(0, endMins - currentMins);
            const dayFraction = tradingMinsTotal > 0 ? minsRemaining / tradingMinsTotal : 1;

            let fullDays;
            if (useTradingDaysFlag) {
                // Count trading days (exclude weekends and holidays)
                const holidaySet = new Set(holidayList.map(h => `${h.year}-${h.month}-${h.day}`));
                fullDays = 0;
                const oneDay = 1000 * 60 * 60 * 24;
                let current = new Date(tradeD.getTime() + oneDay); // Start from day after trade date
                while (current <= expiryD) {
                    const dayOfWeek = current.getDay();
                    const dateKey = `${current.getFullYear()}-${current.getMonth() + 1}-${current.getDate()}`;
                    // Skip weekends (0=Sunday, 6=Saturday) and holidays
                    if (dayOfWeek !== 0 && dayOfWeek !== 6 && !holidaySet.has(dateKey)) {
                        fullDays++;
                    }
                    current = new Date(current.getTime() + oneDay);
                }
            } else {
                fullDays = Math.floor((expiryD - tradeD) / (1000 * 60 * 60 * 24));
            }

            return fullDays + dayFraction;
        };

        const calculate = useCallback(() => {
            if (!initialized) return;
            setError(null);
            const td = parseInputDate(tradeDate);
            const ed = parseInputDate(expiryDate);
            const option = { callPut: optionType === 'call' ? 1 : 0, AmerEurInd: exerciseType === 'american' ? 0 : 1, strike: parseFloat(strike), expDate: ed, m_useTradingDays: useTradingDays === 'true' };
            const stock = { tradeDate: td, spot: parseFloat(spotPrice), repoRate: parseFloat(borrowCost) / 100, vol: parseFloat(volatility) / 100, longRate: parseFloat(riskFreeRate) / 100, overrideInterestRate: true };
            const divs = dividends.map(d => ({ exDivDate: d.date, amount: d.amount }));
            const st = parseTime(startTime, td);
            const et = parseTime(endTime, td);
            const ct = parseTime(currentTime, td);

            const dte = calcDTE(td, ed, startTime, endTime, currentTime, useTradingDays === 'true', holidays);

            const isTradingDays = useTradingDays === 'true';
            if (activeTab === 'price') {
                const output = GptQuantLib.OptPricerSelect(option, stock, divs, 255, st, et, ct);
                if (output.code === 0) { setResults({ type: 'price', data: output.result, dte, isTradingDays }); }
                else { setError(`Calculation failed. Error code: ${output.code}`); }
            } else {
                const output = GptQuantLib.OptPricerImpVol(option, stock, divs, parseFloat(marketPrice), st, et, ct);
                if (output.code === 0) { setResults({ type: 'iv', data: output, dte, isTradingDays }); }
                else { setError(`IV calculation failed. Error code: ${output.code}`); }
            }
        }, [initialized, tradeDate, expiryDate, spotPrice, strike, volatility, riskFreeRate, borrowCost, optionType, exerciseType, useTradingDays, dividends, startTime, endTime, currentTime, activeTab, marketPrice, holidays]);

        const addHoliday = () => { if (!newHoliday) return; const d = parseInputDate(newHoliday); setHolidays([...holidays, d]); setNewHoliday(''); };
        const removeHoliday = (index) => { setHolidays(holidays.filter((_, i) => i !== index)); };
        const addDividend = () => { if (!newDivDate || !newDivAmount) return; const d = parseInputDate(newDivDate); setDividends([...dividends, { date: d, amount: parseFloat(newDivAmount) }]); setNewDivDate(''); setNewDivAmount(''); };
        const removeDividend = (index) => { setDividends(dividends.filter((_, i) => i !== index)); };

        return (
            <div className="container">
                <div className="card"><h1>Option Pricing Calculator</h1><p className="subtitle">Black-Scholes & American Option Pricer with Greeks</p></div>
                <div className="card">
                    <h2>Option Parameters</h2>
                    <div className="grid">
                        <InputField label="Trade Date" type="date" value={tradeDate} onChange={setTradeDate} />
                        <InputField label="Expiry Date" type="date" value={expiryDate} onChange={setExpiryDate} />
                        <InputField label="Spot Price" type="number" value={spotPrice} onChange={setSpotPrice} step="0.01" />
                        <InputField label="Strike Price" type="number" value={strike} onChange={setStrike} step="0.01" />
                    </div>
                    <div className="grid" style={{ marginTop: '16px' }}>
                        <InputField label="Volatility (%)" type="number" value={volatility} onChange={setVolatility} step="0.1" />
                        <InputField label="Risk-Free Rate (%)" type="number" value={riskFreeRate} onChange={setRiskFreeRate} step="0.1" />
                        <InputField label="Borrow Cost (%)" type="number" value={borrowCost} onChange={setBorrowCost} step="0.1" />
                        <SelectField label="Option Type" value={optionType} onChange={setOptionType} options={[{ value: 'call', label: 'Call' }, { value: 'put', label: 'Put' }]} />
                    </div>
                    <div className="grid" style={{ marginTop: '16px' }}>
                        <SelectField label="Exercise Style" value={exerciseType} onChange={setExerciseType} options={[{ value: 'american', label: 'American' }, { value: 'european', label: 'European' }]} />
                        <SelectField label="Use Trading Days" value={useTradingDays} onChange={setUseTradingDays} options={[{ value: 'true', label: 'Yes' }, { value: 'false', label: 'No' }]} />
                        <InputField label="Market Price (for IV)" type="number" value={marketPrice} onChange={setMarketPrice} step="0.01" />
                    </div>
                </div>
                <div className="card">
                    <h2>Intraday Parameters</h2>
                    <div className="grid-3">
                        <InputField label="Market Open" type="time" value={startTime} onChange={setStartTime} />
                        <InputField label="Market Close" type="time" value={endTime} onChange={setEndTime} />
                        <InputField label="Current Time" type="time" value={currentTime} onChange={setCurrentTime} />
                    </div>
                </div>
                <div className="card">
                    <div className="section-toggle" onClick={() => setShowDividends(!showDividends)}><h2>Dividends ({dividends.length})</h2><span>{showDividends ? '' : ''}</span></div>
                    {showDividends && (<div className="section-content">
                        <div className="tag-list">{dividends.map((d, i) => (<span className="tag" key={i}>{formatDate(d.date.year, d.date.month, d.date.day)}: ${d.amount.toFixed(2)}<button onClick={() => removeDividend(i)}>&times;</button></span>))}{dividends.length === 0 && <span style={{ color: '#6c757d', fontSize: '13px' }}>No dividends added</span>}</div>
                        <div className="add-form"><InputField label="Ex-Dividend Date" type="date" value={newDivDate} onChange={setNewDivDate} /><InputField label="Amount ($)" type="number" value={newDivAmount} onChange={setNewDivAmount} step="0.01" /><button className="btn btn-sm btn-secondary" onClick={addDividend}>Add</button></div>
                    </div>)}
                </div>
                <div className="card">
                    <div className="section-toggle" onClick={() => setShowHolidays(!showHolidays)}><h2>Market Holidays ({holidays.length})</h2><span>{showHolidays ? '' : ''}</span></div>
                    {showHolidays && (<div className="section-content">
                        <div className="tag-list">{holidays.map((h, i) => (<span className="tag" key={i}>{formatDate(h.year, h.month, h.day)}<button onClick={() => removeHoliday(i)}>&times;</button></span>))}</div>
                        <div className="add-form"><InputField label="Holiday Date" type="date" value={newHoliday} onChange={setNewHoliday} /><button className="btn btn-sm btn-secondary" onClick={addHoliday}>Add Holiday</button></div>
                    </div>)}
                </div>
                <div className="card">
                    <div className="tabs"><button className={`tab ${activeTab === 'price' ? 'active' : ''}`} onClick={() => setActiveTab('price')}>Price & Greeks</button><button className={`tab ${activeTab === 'iv' ? 'active' : ''}`} onClick={() => setActiveTab('iv')}>Implied Volatility</button></div>
                    <div className="btn-group"><button className="btn btn-primary" onClick={calculate}>{activeTab === 'price' ? 'Calculate Price & Greeks' : 'Calculate Implied Volatility'}</button></div>
                </div>
                {(results || error) && (<div className="card">
                    <h2>Results</h2>
                    {error ? (<div className="results"><div className="result-item error"><div className="label">Error</div><div className="value">{error}</div></div></div>
                    ) : results?.type === 'price' ? (<div className="results"><div className="results-grid">
                        <div className="result-item highlight"><div className="label">{results.isTradingDays ? 'DTE (Trading Days)' : 'DTE (Calendar Days)'}</div><div className="value">{results.dte.toFixed(4)}</div></div>
                        <div className="result-item highlight"><div className="label">Price</div><div className="value">{results.data.price.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Delta</div><div className="value">{results.data.delta.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Gamma</div><div className="value">{results.data.gamma.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Vega</div><div className="value">{results.data.vega.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Theta</div><div className="value">{results.data.theta.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Theta (Interest)</div><div className="value">{results.data.thetaI.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Theta (Vol)</div><div className="value">{results.data.thetaG.toFixed(6)}</div></div>
                        <div className="result-item"><div className="label">Rho</div><div className="value">{results.data.rho0.toFixed(6)}</div></div>
                    </div></div>
                    ) : (<div className="results"><div className="results-grid">
                        <div className="result-item highlight"><div className="label">{results.isTradingDays ? 'DTE (Trading Days)' : 'DTE (Calendar Days)'}</div><div className="value">{results.dte.toFixed(4)}</div></div>
                        <div className="result-item highlight"><div className="label">Implied Volatility</div><div className="value">{(results.data.impliedVolatility * 100).toFixed(4)}%</div></div>
                        <div className="result-item"><div className="label">Price at IV</div><div className="value">{results.data.priceAtImpliedVol.toFixed(6)}</div></div>
                    </div></div>)}
                </div>)}
            </div>
        );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
